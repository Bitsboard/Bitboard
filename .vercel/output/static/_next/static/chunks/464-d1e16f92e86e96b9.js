"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[464],{8223:function(e,t,r){r.d(t,{AuthModal:function(){return s}});var n=r(7437),a=r(2265),l=r(9320);function s(e){let{onClose:t,onAuthed:r,dark:s}=e,[o,i]=(0,a.useState)("/api/auth/login");return(0,a.useEffect)(()=>{let e=window.location.pathname+window.location.search+window.location.hash;i("/api/auth/login?redirect=".concat(encodeURIComponent(e)))},[]),(0,n.jsxs)(l.u_,{open:!0,onClose:t,dark:s,size:"sm",ariaLabel:"Sign in to bitsbarter",children:[(0,n.jsxs)(l.xB,{dark:s,children:[(0,n.jsx)(l.r6,{children:"Sign in"}),(0,n.jsx)(l.ol,{onClose:t,dark:s})]}),(0,n.jsxs)(l.fe,{className:"space-y-6",children:[(0,n.jsx)("div",{className:"text-sm text-neutral-400",children:"Use your Google account to sign in. We don't share your email publicly."}),(0,n.jsxs)("a",{href:o,className:"flex items-center justify-center gap-3 rounded-xl bg-white px-4 py-3 text-sm font-semibold text-neutral-900 shadow ring-1 ring-neutral-200 hover:bg-neutral-50",children:[(0,n.jsx)("span",{className:"text-xl",children:"G"}),(0,n.jsx)("span",{children:"Continue with Google"})]}),(0,n.jsx)("div",{className:"text-[11px] text-neutral-500",children:"By continuing, you agree to our Terms."})]})]})}},6094:function(e,t,r){r.d(t,{Carousel:function(){return s}});var n=r(7437),a=r(2265);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function s(e){let{images:t,alt:r,dark:s,className:o,showDots:i=!0,showArrows:c=!0,rounded:d="rounded-xl",showThumbnails:u=!1}=e,x=t&&t.length>0?t:["https://images.unsplash.com/photo-1555617117-08d3a8fef16c?w=1200&q=80&auto=format&fit=crop"],[m,h]=(0,a.useState)(0),g=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useRef)(0),b=(0,a.useCallback)(e=>e<0?0:e>=x.length?x.length-1:e,[x.length]),v=(0,a.useCallback)(e=>h(t=>b(e)),[b]),j=(0,a.useCallback)(()=>v(m+1),[v,m]),w=(0,a.useCallback)(()=>v(m-1),[v,m]);return(0,a.useEffect)(()=>{let e=g.current;if(!e)return;let t=e=>{"ArrowRight"===e.key&&j(),"ArrowLeft"===e.key&&w()};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)},[j,w]),(0,n.jsx)("div",{ref:g,className:l("relative select-none outline-none",o),tabIndex:0,onTouchStart:e=>{f.current=e.touches[0].clientX,p.current=0},onTouchMove:e=>{null!=f.current&&(p.current=e.touches[0].clientX-f.current)},onTouchEnd:()=>{let e=p.current;f.current=null,p.current=0,e>40?w():e<-40&&j()},"aria-roledescription":"carousel",children:(0,n.jsxs)("div",{className:l("relative h-full w-full overflow-hidden",d),children:[(0,n.jsx)("div",{className:"flex h-full w-full transition-transform duration-300",style:{transform:"translateX(-".concat(100*m,"%)")},children:x.map((e,t)=>(0,n.jsx)("div",{className:"relative h-full w-full shrink-0 grow-0 basis-full",children:(0,n.jsx)("img",{src:e,alt:r,className:"h-full w-full object-cover",loading:0===t?"eager":"lazy",draggable:!1})},t))}),c&&x.length>1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),w()},className:l("absolute left-2 top-1/2 -translate-y-1/2 rounded-xl px-4 py-3 text-base font-semibold transition bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-xl hover:from-orange-400 hover:to-red-400",0===m&&"opacity-0 pointer-events-none"),"aria-label":"Previous image",children:(0,n.jsx)("span",{className:"font-extrabold",children:"←"})}),(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),j()},className:l("absolute right-2 top-1/2 -translate-y-1/2 rounded-xl px-4 py-3 text-base font-semibold transition bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-xl hover:from-orange-400 hover:to-red-400",m===x.length-1&&"opacity-0 pointer-events-none"),"aria-label":"Next image",children:(0,n.jsx)("span",{className:"font-extrabold",children:"→"})})]}),i&&x.length>1&&(0,n.jsxs)("div",{className:"pointer-events-none absolute bottom-2 left-0 right-0 flex items-center justify-center gap-2",children:[(0,n.jsx)("div",{className:"pointer-events-none absolute inset-x-3 -inset-y-1 rounded-xl bg-black/35 blur-md"}),x.map((e,t)=>(0,n.jsx)("div",{className:l("h-2 w-2 rounded-full transition-all",t===m?s?"bg-white":"bg-neutral-900":s?"bg-white/50":"bg-neutral-900/50")},t))]}),u&&x.length>1&&(0,n.jsxs)("div",{className:"pointer-events-auto absolute bottom-2 left-0 right-0 flex items-center justify-center gap-2 px-2 py-2",children:[(0,n.jsx)("div",{className:"pointer-events-none absolute inset-x-2 -inset-y-1 rounded-xl bg-black/45 blur-md"}),x.map((e,t)=>(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),v(t)},className:l("h-12 w-12 overflow-hidden rounded-md border",t===m?s?"border-white/90 ring-2 ring-white/70":"border-neutral-900/90 ring-2 ring-neutral-900/70":s?"border-white/30":"border-neutral-400/60"),"aria-label":"Go to image ".concat(t+1),children:(0,n.jsx)("img",{src:e,alt:"thumbnail",className:"h-full w-full object-cover"})},t))]})]})})}},858:function(e,t,r){r.d(t,{ChatModal:function(){return i}});var n=r(7437),a=r(2265),l=r(6111),s=r(9320);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function i(e){let{listing:t,onClose:r,dark:i,btcCad:d,unit:u}=e,[x,m]=(0,a.useState)([{id:1,who:"seller",text:"Hey! Happy to answer any questions.",at:Date.now()-72e4}]),[h,g]=(0,a.useState)(""),[f,p]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),[j,w]=(0,a.useState)(!0);return(0,n.jsxs)(s.u_,{open:!0,onClose:r,dark:i,size:"xl",ariaLabel:"Chat about ".concat(t.title),panelClassName:o("flex w-full flex-col md:flex-row"),children:[(0,n.jsxs)("div",{className:o("flex items-center justify-between border-b px-4 py-3 md:border-b-0 md:border-r",i?"border-neutral-900":"border-neutral-200"),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm opacity-70",children:"Chat about"}),(0,n.jsx)("div",{className:"font-semibold",children:t.title})]}),(0,n.jsx)("button",{onClick:r,className:o("rounded-lg px-3 py-1",i?"text-neutral-400 hover:bg-neutral-900 hover:text-neutral-200":"text-neutral-600 hover:bg-neutral-100 hover:text-neutral-800"),children:"Close"})]}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col",children:[j&&(0,n.jsx)("div",{className:o("m-3 rounded-xl p-3 text-xs",i?"bg-neutral-900 text-neutral-300":"bg-neutral-100 text-neutral-700"),children:(0,n.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{className:"mr-2",children:"Safety tips:"}),"Meet in a ",(0,n.jsx)("em",{children:"very public"})," place (mall, caf\xe9, police e-commerce zone), bring a friend, keep chats in-app, verify serials and condition before paying, and prefer Lightning escrow over cash."]}),(0,n.jsx)("button",{onClick:()=>w(!1),className:o("rounded px-2 py-1",i?"hover:bg-neutral-800":"hover:bg-neutral-200"),children:"Hide"})]})}),(0,n.jsx)("div",{className:"flex-1 space-y-2 overflow-auto p-4",children:x.map(e=>(0,n.jsx)("div",{className:o("max-w-[70%] rounded-2xl px-3 py-2 text-sm","me"===e.who?"ml-auto bg-orange-500 text-neutral-950":i?"bg-neutral-900":"bg-neutral-100"),children:e.text},e.id))}),(0,n.jsxs)("div",{className:o("flex items-center gap-2 border-t p-3",i?"border-neutral-900":"border-neutral-200"),children:[(0,n.jsx)("input",{value:h,onChange:e=>g(e.target.value),placeholder:"Write a message…",className:o("flex-1 rounded-xl px-3 py-2 focus:outline-none",i?"border border-neutral-800 bg-neutral-900 text-neutral-100":"border border-neutral-300 bg-white text-neutral-900")}),(0,n.jsxs)("label",{className:o("flex items-center gap-2 rounded-xl px-3 py-2 text-xs",i?"border border-neutral-800":"border border-neutral-300"),children:[(0,n.jsx)("input",{type:"checkbox",checked:f,onChange:e=>p(e.target.checked)})," Attach escrow proposal"]}),(0,n.jsx)("button",{onClick:function(){(h||f)&&(h&&m(e=>[...e,{id:Math.random(),who:"me",text:h,at:Date.now()}]),f&&v(!0),g(""),p(!1))},className:"rounded-xl bg-orange-500 px-4 py-2 text-sm font-semibold text-neutral-950",children:"Send"})]})]}),b&&(0,n.jsxs)("div",{className:o("w-full max-w-md border-l",i?"border-neutral-900":"border-neutral-200"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,n.jsx)("div",{className:"font-semibold",children:"Escrow proposal"}),(0,n.jsx)("button",{onClick:()=>v(!1),className:o("rounded px-2 py-1 text-xs",i?"hover:bg-neutral-900":"hover:bg-neutral-100"),children:"Hide"})]}),(0,n.jsxs)("div",{className:"px-4 pb-4",children:[(0,n.jsx)(l.PriceBlock,{sats:t.priceSats,unit:u,btcCad:d,dark:i}),(0,n.jsx)("div",{className:o("mt-1 text-xs",i?"text-neutral-400":"text-neutral-600"),children:"Funds are locked via Lightning hold invoice until both parties confirm release."})]}),(0,n.jsx)(c,{listing:t,onClose:()=>v(!1),dark:i})]})]})}function c(e){let{listing:t,onClose:r,dark:l}=e,[s,i]=(0,a.useState)(1),c=Math.ceil(100*t.priceSats/1e4),u=t.priceSats+c,[x,m]=(0,a.useState)(()=>"lnbchold".concat(u,"n1p").concat(Math.random().toString(36).slice(2,10),"..."));return(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 p-4",children:[(0,n.jsxs)("div",{className:o("rounded-xl p-3 text-sm",l?"border border-neutral-800 bg-neutral-900":"border border-neutral-300 bg-white"),children:[(0,n.jsxs)("div",{children:["Send ",(0,n.jsxs)("span",{className:"font-bold text-orange-500",children:[d(u)," sats"]})," to lock funds:"]}),(0,n.jsx)("div",{className:o("mt-3 rounded-lg p-3 text-xs",l?"bg-neutral-800":"bg-neutral-100"),children:x}),(0,n.jsxs)("div",{className:o("mt-2 text-xs",l?"text-neutral-400":"text-neutral-600"),children:["Includes escrow fee ",d(c)," sats (1%)."]}),(0,n.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>i(2),className:"rounded-xl bg-orange-500 px-4 py-2 text-sm font-semibold text-neutral-950 shadow shadow-orange-500/30",children:"I've deposited"}),(0,n.jsx)("button",{onClick:()=>m("lnbchold".concat(u,"n1p").concat(Math.random().toString(36).slice(2,10),"...")),className:o("rounded-xl px-4 py-2 text-sm",l?"border border-neutral-800 hover:bg-neutral-900":"border border-neutral-300 hover:bg-neutral-100"),children:"Regenerate"}),(0,n.jsx)("button",{onClick:r,className:o("ml-auto rounded-xl px-4 py-2 text-sm",l?"border border-neutral-800 hover:bg-neutral-900":"border border-neutral-300 hover:bg-neutral-100"),children:"Close"})]})]}),(0,n.jsxs)("div",{className:o("rounded-xl p-3 text-xs",l?"bg-neutral-900 text-neutral-400":"bg-neutral-100 text-neutral-600"),children:["Step ",s,"/3 — Meet in a very public place; if all good, both confirm release. Otherwise request refund; mediator can arbitrate."]})]})}function d(e){return new Intl.NumberFormat(void 0).format(e)}},9966:function(e,t,r){r.d(t,{default:function(){return o}});var n=r(7437),a=r(6062),l=r(6248),s=r(7138);function o(){let e=(0,a.J)(),t={legal:[{key:"privacy",href:"/".concat(e,"/privacy")},{key:"terms",href:"/".concat(e,"/terms")},{key:"safety",href:"/".concat(e,"/safety")}],services:[{key:"escrow",href:"/".concat(e,"/escrow")},{key:"help",href:"/".concat(e,"/help")},{key:"support",href:"/".concat(e,"/support")}],company:[{key:"about",href:"/".concat(e,"/about")},{key:"contact",href:"/".concat(e,"/contact")},{key:"careers",href:"/".concat(e,"/careers")}]};return(0,n.jsx)("footer",{className:"border-t border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950",children:(0,n.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-8",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex items-center gap-2 mb-3",children:(0,n.jsxs)("span",{className:"text-2xl tracking-tight leading-none",children:[(0,n.jsx)("span",{className:"font-bold text-orange-500",children:"bits"}),(0,n.jsx)("span",{className:"font-bold text-neutral-900 dark:text-white",children:"barter"})]})}),(0,n.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-3",children:"The Bitcoin-native Marketplace."}),(0,n.jsxs)("div",{className:"space-y-1 text-sm text-neutral-500 dark:text-neutral-400",children:[(0,n.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," bitsbarter"]}),(0,n.jsx)("p",{children:(0,l.t)("made_with_love",e)})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-white mb-3 uppercase tracking-wide",children:"Legal"}),(0,n.jsx)("ul",{className:"space-y-2",children:t.legal.map(t=>(0,n.jsx)("li",{children:(0,n.jsx)(s.default,{href:t.href,className:"text-sm text-neutral-600 dark:text-neutral-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors duration-200",children:(0,l.t)(t.key,e)})},t.key))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-white mb-3 uppercase tracking-wide",children:"Services"}),(0,n.jsx)("ul",{className:"space-y-2",children:t.services.map(t=>(0,n.jsx)("li",{children:(0,n.jsx)(s.default,{href:t.href,className:"text-sm text-neutral-600 dark:text-neutral-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors duration-200",children:(0,l.t)(t.key,e)})},t.key))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-neutral-900 dark:text-white mb-3 uppercase tracking-wide",children:"Company"}),(0,n.jsx)("ul",{className:"space-y-2",children:t.company.map(t=>(0,n.jsx)("li",{children:(0,n.jsx)(s.default,{href:t.href,className:"text-sm text-neutral-600 dark:text-neutral-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors duration-200",children:(0,l.t)(t.key,e)})},t.key))})]})]})})})}},8011:function(e,t,r){r.d(t,{ItemsCarousel:function(){return o}});var n=r(7437),a=r(2265),l=r(6896);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function o(e){let{listings:t,unit:r,btcCad:o,dark:i,onOpen:c}=e,d=(0,a.useRef)(null),u=(0,a.useMemo)(()=>null!=t?t:[],[t]),[x,m]=(0,a.useState)(!1),h=e=>{let t=d.current;t&&t.scrollBy({left:e,behavior:"smooth"})};(0,a.useEffect)(()=>{let e=setInterval(()=>{x||h(400)},1e4);return()=>clearInterval(e)},[x]);let[g,f]=(0,a.useState)(!0),[p,b]=(0,a.useState)(!1),v=()=>{let e=d.current;e&&(f(e.scrollLeft<=0),b(Math.ceil(e.scrollLeft+e.clientWidth)>=e.scrollWidth))};return(0,a.useEffect)(()=>{v();let e=d.current;if(e)return e.addEventListener("scroll",v,{passive:!0}),()=>e.removeEventListener("scroll",v)},[]),(0,n.jsxs)("div",{className:"relative px-2 sm:px-0",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,n.jsx)("div",{ref:d,className:s("no-scrollbar flex gap-4 overflow-x-auto overflow-y-visible scroll-px-4 snap-x snap-mandatory py-4","[&::-webkit-scrollbar]:hidden"),children:u.map(e=>(0,n.jsx)("div",{className:"snap-center shrink-0 grow-0 basis-[260px] sm:basis-[280px] md:basis-[300px]",style:{willChange:"transform"},children:(0,n.jsx)(l.ListingCard,{listing:e,unit:r,btcCad:o,dark:i,onOpen:()=>c(e)})},e.id))}),(0,n.jsx)("button",{className:s("absolute -left-8 top-1/2 -translate-y-1/2 rounded-xl px-4 py-3 text-base font-semibold transition bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-xl hover:from-orange-400 hover:to-red-400",g&&"opacity-0 pointer-events-none"),"aria-label":"Previous",onClick:()=>h(-400),children:(0,n.jsx)("span",{className:"font-extrabold",children:"←"})}),(0,n.jsx)("button",{className:s("absolute -right-8 top-1/2 -translate-y-1/2 rounded-xl px-4 py-3 text-base font-semibold transition bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-xl hover:from-orange-400 hover:to-red-400",p&&"opacity-0 pointer-events-none"),"aria-label":"Next",onClick:()=>h(400),children:(0,n.jsx)("span",{className:"font-extrabold",children:"→"})})]})}},6896:function(e,t,r){r.d(t,{ListingCard:function(){return d}});var n=r(7437);r(2265);var a=r(7138),l=r(6111),s=r(6248),o=r(6062),i=r(6094);function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function d(e){var t,r;let{listing:d,unit:u,btcCad:x,dark:m,onOpen:h}=e;d.boostedUntil&&(d.boostedUntil,Date.now());let g="sell"===d.type?{stripe:"from-emerald-500 to-teal-500",chip:"from-emerald-500 to-teal-500"}:{stripe:"from-fuchsia-500 to-violet-500",chip:"from-fuchsia-500 to-violet-500"};return(0,n.jsxs)("article",{onClick:h,className:c("group relative cursor-pointer overflow-hidden rounded-2xl transition-transform duration-300 hover:scale-[1.02] hover:ring-2 hover:ring-orange-500/80",m?"border border-neutral-800 bg-neutral-950 hover:border-orange-400/60":"border border-neutral-200 bg-white hover:border-orange-400/60"),children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(i.Carousel,{images:(null===(t=d.images)||void 0===t?void 0:t[0])?[d.images[0]]:[],alt:d.title,dark:m,className:"aspect-[5/4]",rounded:"rounded-t-2xl",showDots:!1,showArrows:!1}),(0,n.jsx)("div",{className:c("pointer-events-none absolute left-0 right-0 top-0 h-1 rounded-t-2xl bg-gradient-to-r",g.stripe)}),(0,n.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 p-3",children:(0,n.jsxs)("div",{className:"flex items-end justify-between gap-2",children:[(0,n.jsx)("span",{className:c("rounded-full bg-gradient-to-r px-3 py-1 text-[11px] font-semibold text-white",g.chip),children:"want"===d.type?(0,s.t)("looking_for",(0,o.J)()):(0,s.t)("selling",(0,o.J)())}),(0,n.jsxs)("span",{className:c("truncate max-w-[60%] rounded-full px-3 py-1 text-[11px] backdrop-blur-sm",m?"bg-neutral-900/80 text-neutral-200":"bg-white/80 text-neutral-700"),children:["\uD83D\uDCCD ",d.location]})]})})]}),(0,n.jsxs)("div",{className:"p-4 pt-4",children:[(0,n.jsx)("div",{className:"min-h-[3.5rem]",children:(0,n.jsx)("h3",{className:c("line-clamp-2 text-xl font-semibold leading-snug",m?"text-white":"text-neutral-900"),children:(r=d.title,"want"!==d.type?r:r.replace(/^\s*(looking\s*for\s*:?-?\s*)/i,"").trim())})}),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(l.PriceBlock,{sats:d.priceSats,unit:u,btcCad:x,dark:m,size:"lg",compactFiat:!0})}),(0,n.jsx)("div",{className:"mt-4 text-left text-sm",children:(0,n.jsxs)("div",{className:c("inline-flex items-center gap-2",m?"text-neutral-300":"text-neutral-700"),children:[d.seller.score>=50&&(0,n.jsx)("span",{className:c("verified-badge inline-flex h-4 w-4 items-center justify-center rounded-full text-white font-extrabold shadow-[0_0_8px_rgba(56,189,248,0.8)]","bg-sky-500"),"aria-label":"Verified",title:(0,s.t)("verified_tooltip",(0,o.J)()),children:"✓"}),(0,n.jsx)(a.default,{href:"/en/".concat(d.seller.name),className:"truncate max-w-[8rem] sm:max-w-[10rem] hover:text-orange-500 dark:hover:text-orange-400 transition-colors duration-200",onClick:e=>e.stopPropagation(),children:d.seller.name}),(0,n.jsxs)("span",{className:c(m?"text-neutral-400":"text-neutral-600"),children:["+",d.seller.score," \uD83D\uDC4D"]})]})})]})]})}},6096:function(e,t,r){r.d(t,{ListingModal:function(){return d}});var n=r(7437);r(2265);var a=r(6111),l=r(6094),s=r(9320),o=r(6248),i=r(6062);function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function d(e){var t;let{listing:r,onClose:d,unit:u,btcCad:x,dark:m,onChat:h}=e,g=r.boostedUntil&&r.boostedUntil>Date.now(),f=(0,i.J)(),p="sell"===r.type?{stripe:"from-emerald-500 to-teal-500",chip:"from-emerald-500 to-teal-500"}:{stripe:"from-fuchsia-500 to-violet-500",chip:"from-fuchsia-500 to-violet-500"};return(0,n.jsxs)(s.u_,{open:!0,onClose:d,dark:m,size:"lg",ariaLabel:r.title,children:[(0,n.jsxs)(s.xB,{dark:m,children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:c("flex-shrink-0 rounded-full bg-gradient-to-r px-3 py-1 text-[11px] font-semibold text-white",p.chip),children:"want"===r.type?(0,o.t)("looking_for",f):(0,o.t)("selling",f)}),(0,n.jsx)(s.r6,{children:r.title}),g&&(0,n.jsx)("span",{className:"rounded-full bg-gradient-to-r from-amber-400 to-orange-500 px-2 py-0.5 text-[10px] font-bold text-neutral-950",children:"BOOSTED"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>{try{let e={title:r.title,text:r.title,url:window.location.href};"undefined"!=typeof navigator&&navigator.share?navigator.share(e):"undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText(window.location.href)}catch(e){}},className:c("rounded-lg px-3 py-1",m?"text-neutral-400 hover:bg-neutral-900 hover:text-neutral-200":"text-neutral-600 hover:bg-neutral-100 hover:text-neutral-800"),children:(0,o.t)("share_listing",f)}),(0,n.jsx)(s.ol,{onClose:d,dark:m,label:(0,o.t)("close",f)})]})]}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5",style:{maxHeight:"calc(90vh - 64px)"},children:[(0,n.jsxs)("div",{className:"md:col-span-3 overflow-hidden",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(l.Carousel,{images:r.images,alt:r.title,dark:m,className:"aspect-[5/4]",showThumbnails:!0,showDots:!1,rounded:""}),(0,n.jsx)("div",{className:c("pointer-events-none absolute left-0 right-0 top-0 h-1 bg-gradient-to-r",p.stripe)})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2 items-center",children:[(0,n.jsxs)("div",{className:c("text-sm flex items-center gap-2",m?"text-neutral-300":"text-neutral-700"),children:[r.seller.score>=50&&(0,n.jsx)("span",{className:c("verified-badge inline-flex h-4 w-4 items-center justify-center rounded-full text-white font-extrabold shadow-[0_0_8px_rgba(56,189,248,0.8)]","bg-sky-500"),"aria-label":"Verified",title:(0,o.t)("verified_tooltip",f),children:"✓"}),(0,n.jsx)("span",{children:r.seller.name}),(0,n.jsxs)("span",{className:"opacity-80",children:["+",r.seller.score," \uD83D\uDC4D"]})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)("button",{onClick:h,className:"min-w-[240px] rounded-xl bg-gradient-to-r from-orange-500 to-red-500 px-6 py-2 text-sm font-semibold text-white shadow",children:(0,o.t)("send_message",f)})}),(0,n.jsx)("div",{children:(0,n.jsx)("span",{className:c("text-xs font-bold cursor-pointer",m?"text-red-400":"text-red-600"),children:(0,o.t)("report_listing",f)})}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)("div",{className:c("flex items-center gap-2 text-xs text-right whitespace-nowrap",m?"text-neutral-400":"text-neutral-600"),children:[(0,n.jsx)("span",{children:(0,o.t)("listing_warning",f)}),(0,n.jsx)("a",{href:"/".concat(f,"/safety"),className:c("font-semibold underline",m?"text-neutral-300":"text-neutral-700"),children:(0,o.t)("learn_more",f)})]})})]})})]}),(0,n.jsxs)("div",{className:c("md:col-span-2 border-l flex flex-col",m?"border-neutral-900":"border-neutral-200"),style:{maxHeight:"calc(90vh - 64px)"},children:[(0,n.jsxs)("div",{className:"p-3 pr-6 shrink-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(a.PriceBlock,{sats:r.priceSats,unit:u,btcCad:x,dark:m,size:"md",compactFiat:!0})}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("span",{className:c("rounded-full px-3 py-1 text-[11px] inline-block",m?"bg-neutral-900 text-neutral-300":"bg-neutral-100 text-neutral-700"),children:["\uD83D\uDCCD ",r.location]}),(0,n.jsx)("div",{className:c("mt-1 text-xs",m?"text-neutral-400":"text-neutral-600"),children:(t=r.createdAt,(0,o.Ty)(t,f))})]})]}),(0,n.jsx)("div",{className:c("mt-2 h-px",m?"bg-neutral-900":"bg-neutral-200")})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto overscroll-contain scroll-bounce p-3 pr-10 mr-2 md:mr-3",children:(0,n.jsx)("div",{className:c("prose prose-sm max-w-none",m?"prose-invert":""),children:(0,n.jsx)("p",{className:c("whitespace-pre-wrap",m?"text-neutral-300":"text-neutral-800"),children:r.desc})})})]})]})})]})}},2662:function(e,t,r){r.d(t,{ListingRow:function(){return c}});var n=r(7437);r(2265);var a=r(6111),l=r(6248),s=r(6062),o=r(6094);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function c(e){var t,r;let{listing:c,unit:d,btcCad:u,dark:x,onOpen:m}=e,h=c.boostedUntil&&c.boostedUntil>Date.now(),g="sell"===c.type?{stripe:"from-emerald-500 to-teal-500",chip:"from-emerald-500 to-teal-500"}:{stripe:"from-fuchsia-500 to-violet-500",chip:"from-fuchsia-500 to-violet-500"};return(0,n.jsxs)("article",{onClick:m,className:i("group relative grid grid-cols-12 gap-4 overflow-hidden rounded-2xl p-4 transition-transform duration-300 hover:scale-[1.02] hover:ring-2 hover:ring-orange-500/80 cursor-pointer min-h-[10rem] sm:min-h-[11rem] md:min-h-[12rem]",x?"border border-neutral-800 bg-neutral-950 hover:border-orange-400/60":"border border-neutral-300 bg-white hover:border-orange-400/60"),children:[(0,n.jsx)("div",{className:i("absolute right-0 top-0 h-full w-1 bg-gradient-to-b",g.stripe)}),h&&(0,n.jsx)("div",{className:"absolute right-4 top-3 z-10 rounded-full bg-gradient-to-r from-amber-400 to-orange-500 px-3 py-1 text-xs font-bold text-neutral-950 shadow-lg",children:"BOOSTED"}),(0,n.jsx)("div",{className:"col-span-3 overflow-hidden rounded-l-2xl -ml-4 -my-4 mr-0 h-[10rem] sm:h-[11rem] md:h-[12rem]",children:(0,n.jsxs)("div",{className:"relative h-full",children:[(0,n.jsx)(o.Carousel,{images:(null===(t=c.images)||void 0===t?void 0:t[0])?[c.images[0]]:[],alt:c.title,dark:x,className:"h-full",rounded:"rounded-l-2xl",showDots:!1,showArrows:!1}),(0,n.jsx)("div",{className:i("pointer-events-none absolute left-0 top-0 bottom-0 w-1 rounded-l-2xl bg-gradient-to-b",g.stripe)})]})}),(0,n.jsxs)("div",{className:"col-span-9 flex flex-col pl-2 sm:pl-4 md:pl-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-1 gap-2 min-w-0",children:[(0,n.jsx)("span",{className:i("flex-shrink-0 rounded-full bg-gradient-to-r px-3 py-1 text-[11px] font-semibold text-white",g.chip),children:"want"===c.type?(0,l.t)("looking_for",(0,s.J)()):(0,l.t)("selling",(0,s.J)())}),(0,n.jsxs)("span",{className:i("truncate rounded-full px-3 py-1 text-[11px] max-w-[40%]",x?"bg-neutral-900 text-neutral-300":"bg-neutral-100 text-neutral-700"),children:["\uD83D\uDCCD ",c.location]})]}),(0,n.jsx)("h3",{className:i("line-clamp-2 text-xl font-bold",x?"text-white":"text-neutral-900"),children:(r=c.title,"want"!==c.type?r:r.replace(/^\s*(looking\s*for\s*:?-?\s*)/i,"").trim())}),(0,n.jsxs)("div",{className:"mt-auto flex items-end justify-between pt-3",children:[(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(a.PriceBlock,{sats:c.priceSats,unit:d,btcCad:u,dark:x,size:"lg"})}),(0,n.jsxs)("div",{className:"text-right text-base",children:[(0,n.jsxs)("div",{className:i("inline-flex items-center gap-2",x?"text-neutral-300":"text-neutral-700"),children:[c.seller.score>=50&&(0,n.jsx)("span",{className:i("verified-badge inline-flex h-4 w-4 items-center justify-center rounded-full text-white font-extrabold shadow-[0_0_8px_rgba(56,189,248,0.8)]","bg-sky-500"),"aria-label":"Verified",title:(0,l.t)("verified_tooltip",(0,s.J)()),children:"✓"}),(0,n.jsx)("span",{className:"truncate max-w-[12rem] sm:max-w-[16rem] md:max-w-[20rem]",children:c.seller.name})]}),(0,n.jsxs)("div",{className:i(x?"text-neutral-400":"text-neutral-600"),children:["+",c.seller.score," \uD83D\uDC4D reputation"]})]})]})]})]})}},3779:function(e,t,r){r.d(t,{LocationAutocomplete:function(){return o}});var n=r(7437),a=r(2265);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}let s={CA:"Canada",CAN:"Canada",US:"United States",USA:"United States",UK:"United Kingdom",GB:"United Kingdom",GBR:"United Kingdom",DE:"Germany",DEU:"Germany",FR:"France",FRA:"France",ES:"Spain",ESP:"Spain",MX:"Mexico",MEX:"Mexico",IT:"Italy",ITA:"Italy",BR:"Brazil",BRA:"Brazil",AU:"Australia",AUS:"Australia",JP:"Japan",JPN:"Japan"};function o(e){let{value:t,onSelect:r,inputBase:o,dark:i}=e,[c,d]=(0,a.useState)(!1),[u,x]=(0,a.useState)((null==t?void 0:t.name)||""),[m,h]=(0,a.useState)([]),[g,f]=(0,a.useState)(!1),p=(0,a.useRef)(null);function b(e){let t=e.trim();if(!t)return e;if(!t.includes(",")&&t.length<=3){var r;return s[r=t.toUpperCase()]||r}let n=t.split(","),a=n[n.length-1].trim().toUpperCase();return s[a]?(n[n.length-1]=s[a],n.join(", ")):e}return(0,a.useEffect)(()=>{x((null==t?void 0:t.name)||"")},[t]),(0,a.useEffect)(()=>{function e(e){p.current&&!p.current.contains(e.target)&&d(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{let e=u.trim();if(e.length<2){h([]);return}let t=new AbortController,r=setTimeout(async()=>{try{f(!0);let r=await fetch("/api/places?q=".concat(encodeURIComponent(e),"&limit=20"),{signal:t.signal,headers:{Accept:"application/json"}}),n=((await r.json()).results||[]).map(e=>({name:e.name,lat:e.lat,lng:e.lng}));h(n)}catch(e){h([])}finally{f(!1)}},250);return()=>{clearTimeout(r),t.abort()}},[u]),(0,n.jsxs)("div",{className:"relative",ref:p,children:[(0,n.jsx)("input",{value:b(u),onChange:e=>{x(e.target.value),d(!0)},onFocus:()=>d(!0),placeholder:"Search city",className:l("w-full bg-transparent px-4 sm:px-6 py-4 sm:py-5 text-base sm:text-lg transition-all duration-300 focus:outline-none focus-visible:outline-none focus:ring-0",i?"text-neutral-100 placeholder-neutral-400":"text-neutral-900 placeholder-neutral-500")}),c&&(0,n.jsxs)("div",{className:l("absolute z-50 mt-3 w-full max-h-60 overflow-y-auto rounded-2xl border shadow-2xl",i?"border-neutral-700/50 bg-neutral-900":"border-neutral-300/50 bg-white"),children:[u.trim().length<2&&(0,n.jsx)("div",{className:l("px-4 py-3 text-sm",i?"text-neutral-400":"text-neutral-600"),children:'Start typing to search globally (e.g., "Paris", "NYC", "Canada")'}),g&&(0,n.jsx)("div",{className:l("px-4 py-3 text-sm",i?"text-neutral-400":"text-neutral-600"),children:"Searching…"}),!g&&u.trim().length>=2&&0===m.length&&(0,n.jsx)("div",{className:l("px-4 py-3 text-sm",i?"text-neutral-400":"text-neutral-600"),children:"No matches found"}),m.map(e=>(0,n.jsx)("button",{onClick:()=>{r(e),d(!1)},className:l("block w-full px-4 py-3 text-left text-sm transition-colors",i?"hover:bg-neutral-800/50":"hover:bg-neutral-100/50"),children:b(e.name)},e.name))]})]})}},4189:function(e,t,r){r.d(t,{LocationModal:function(){return c}});var n=r(7437),a=r(2265),l=r(9354),s=r(9320),o=r(6248),i=r(6062);function c(e){var t,c;let{open:d,onClose:u,initialCenter:x,initialRadiusKm:m=25,onApply:h,dark:g}=e,f=a.useRef(null),p=a.useRef(null),b=a.useRef(null),v=a.useRef(null),j=a.useRef(null),w=(0,i.J)(),[y,N]=a.useState(""),[k,C]=a.useState(m),[S,D]=a.useState({name:(null==x?void 0:x.name)||"",lat:null!==(t=null==x?void 0:x.lat)&&void 0!==t?t:43.6532,lng:null!==(c=null==x?void 0:x.lng)&&void 0!==c?c:-79.3832}),[E,L]=a.useState([]),[M,A]=a.useState(!1),[T,I]=a.useState(!1),[B,_]=a.useState(0===m?"global":"local");function U(e){return e<=0?1:e<=2?12:e<=5?11:e<=10?10:e<=25?9:e<=50?8:e<=100?7:e<=250?6:e<=500?5:4}function P(){var e,t,r,n;return Math.floor(.32*Math.min(null!==(r=null===(e=f.current)||void 0===e?void 0:e.clientHeight)&&void 0!==r?r:280,null!==(n=null===(t=f.current)||void 0===t?void 0:t.clientWidth)&&void 0!==n?n:400))}function z(){var e,t,r,n;let a=null!==(r=null===(e=f.current)||void 0===e?void 0:e.clientHeight)&&void 0!==r?r:280,l=null!==(n=null===(t=f.current)||void 0===t?void 0:t.clientWidth)&&void 0!==n?n:400;return Math.ceil(Math.sqrt(a*a+l*l)/2)+20}let R={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY","District of Columbia":"DC"},F={Alberta:"AB","British Columbia":"BC",Manitoba:"MB","New Brunswick":"NB","Newfoundland and Labrador":"NL","Nova Scotia":"NS",Ontario:"ON","Prince Edward Island":"PE",Quebec:"QC",Saskatchewan:"SK","Northwest Territories":"NT",Nunavut:"NU",Yukon:"YT"};function O(e){if(e)return({us:"USA",ca:"CAN",mx:"MEX",gb:"GBR",uk:"GBR",de:"DEU",fr:"FRA",es:"ESP",it:"ITA",nl:"NLD",se:"SWE",no:"NOR",fi:"FIN",dk:"DNK",au:"AUS",nz:"NZL",jp:"JPN",cn:"CHN",in:"IND",br:"BRA",ar:"ARG",cl:"CHL",co:"COL",pe:"PER",ru:"RUS",ua:"UKR",za:"ZAF"})[e.toLowerCase()]||e.toUpperCase()}function J(e,t,r){if(!t)return;let n=(e||"").toLowerCase();return r&&r.includes("-")?r.split("-")[1].toUpperCase():"us"===n?R[t]||void 0:"ca"===n&&F[t]||void 0}async function H(e,t){try{let r=new AbortController,n="https://geocoding-api.open-meteo.com/v1/reverse?latitude=".concat(e,"&longitude=").concat(t,"&count=10&language=en&format=json"),a=await fetch(n,{signal:r.signal});if(a.ok){let r=await a.json(),n=((null==r?void 0:r.results)||[]).filter(e=>"string"==typeof(null==e?void 0:e.feature_code)&&e.feature_code.startsWith("PPL"));if(n.length>0){let r=null,a=1/0;for(let l of n){let n=function(e,t){let r=(t.lat-e.lat)*Math.PI/180,n=(t.lng-e.lng)*Math.PI/180;return 12742*Math.asin(Math.sqrt(Math.sin(r/2)**2+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(n/2)**2))}({lat:e,lng:t},{lat:Number(l.latitude),lng:Number(l.longitude)});n<a&&(r=l,a=n)}if(r){let e=(r.country_code||"").toString(),t=O(e),n=r.admin1_id||"",a=J(e,(r.admin1||"").toString(),n);return{name:[(r.name||"").toString(),a||r.admin1||"",t].filter(Boolean).join(", "),lat:Number(r.latitude),lng:Number(r.longitude)}}}}}catch(e){}try{let r="https://geodb-free-service.wirefreethought.com/v1/geo/locations/".concat(e).concat(t,"/nearbyCities?limit=5&radius=100&minPopulation=1&sort=distance&hateoasMode=false"),n=await fetch(r);if(n.ok){let r=await n.json(),a=((null==r?void 0:r.data)||[])[0];if(a){let r=(a.countryCode||"").toString(),n=O(r),l=(a.regionCode||a.region||"").toString(),s=(a.city||"").toString(),o=[s,l,n].filter(Boolean).join(", ");if(s)return{name:o,lat:e,lng:t}}}}catch(e){}try{let r="https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(e,"&lon=").concat(t,"&zoom=10&addressdetails=1"),n=await fetch(r,{headers:{Accept:"application/json"}});if(n.ok){let r=await n.json(),a=(null==r?void 0:r.address)||{},l=(a.country_code||"").toString(),s=O(l),o=a["ISO3166-2-lvl4"]||a["ISO3166-2-lvl6"]||a["ISO3166-2-lvl3"],i=J(l,(a.state||"").toString(),o),c=(a.city||a.town||a.village||a.municipality||"").toString();if(c)return{name:[c,i||a.state||"",s].filter(Boolean).join(", "),lat:e,lng:t}}}catch(e){}return null}function W(e,t){if(!p.current||!j.current)return;let r=j.current.default||j.current;try{var n;null===(n=b.current)||void 0===n||n.remove()}catch(e){}0===e?(b.current=r.circleMarker([0,5],{radius:z(),stroke:!1,fillColor:"#f97316",fillOpacity:.25}).addTo(p.current),_("global")):(b.current=r.circleMarker([t.lat,t.lng],{radius:P(),color:"#f97316",fillColor:"#f97316",fillOpacity:.15}).addTo(p.current),_("local"))}a.useEffect(()=>{if(!d)return;let e="leaflet-css";if(!document.getElementById(e)){let t=document.createElement("link");t.id=e,t.rel="stylesheet",t.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(t)}},[d]),a.useEffect(()=>{let e=()=>{};return(async()=>{if(!d||!f.current)return;let t=await r.e(212).then(r.t.bind(r,7691,23));j.current=t,delete t.Icon.Default.prototype._getIconUrl,t.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),p.current&&p.current.remove();let n=0===k?0:S.lat,a=0===k?5:S.lng,l=t.map(f.current,{zoomControl:!1}).setView([n,a],U(k));p.current=l,l.dragging.disable(),l.touchZoom.disable(),l.doubleClickZoom.disable(),l.scrollWheelZoom.disable(),l.boxZoom.disable(),l.keyboard.disable(),t.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{maxZoom:19,attribution:"\xa9 OpenStreetMap \xa9 CARTO",noWrap:!0}).addTo(l);let s=l.createPane("worldTint");s.style.zIndex=350,s.style.background="transparent",s.style.pointerEvents="none",t.tileLayer("",{pane:"worldTint"}).addTo(l);let o=t.icon({iconUrl:"/Bitsbarterlogo.svg",iconRetinaUrl:"/Bitsbarterlogo.svg",iconSize:[36,36],iconAnchor:[18,34],shadowUrl:void 0}),i=t.marker([S.lat,S.lng],{draggable:!1,icon:o}).addTo(l);if(v.current=i,0===k){let e=t.circleMarker([0,5],{radius:z(),stroke:!1,fillColor:"#f97316",fillOpacity:.25}).addTo(l);b.current=e}else{let e=t.circleMarker([S.lat,S.lng],{radius:P(),color:"#f97316",fillColor:"#f97316",fillOpacity:.15}).addTo(l);b.current=e}_(0===k?"global":"local"),e=()=>{l.remove(),p.current=null,b.current=null,v.current=null}})(),()=>e()},[d]),a.useEffect(()=>{if(!d)return;let e=!1;try{e="1"===localStorage.getItem("usingMyLocation")}catch(e){}let t=e||((null==x?void 0:x.name)||"")===(0,o.t)("my_location",w);if(I(t),t)N("");else{let e=(null==S?void 0:S.name)||(null==x?void 0:x.name)||"";e&&!y&&N(e)}},[d,null==x?void 0:x.name,null==S?void 0:S.name,w]),a.useEffect(()=>{let e=(()=>{try{return"1"===localStorage.getItem("usingMyLocation")}catch(e){return!1}})();(T||e)&&D(e=>({...e,name:(0,o.t)("my_location",w)}))},[w]),a.useEffect(()=>{d&&!T&&(null==S?void 0:S.name)&&N(S.name)},[S.name,T,d]),a.useEffect(()=>{if(!d)return;let e=(null==S?void 0:S.name)||"",t=/\d+\.\d+,\s*\d+\.\d+/.test(e);if(!(e===(0,o.t)("my_location",w)||t)&&T){I(!1);try{localStorage.setItem("usingMyLocation","0")}catch(e){}}},[S.name,d,w,T]),a.useEffect(()=>{d&&T&&N("")},[T,d]),a.useEffect(()=>{var e,t;if(!p.current)return;let r=p.current.getPane("worldTint");r&&(r.style.background="transparent"),0===k?(p.current.setView([0,5],U(0)),null===(e=v.current)||void 0===e||e.setLatLng([S.lat,S.lng]),W(0,S)):(p.current.setView([S.lat,S.lng],U(k)),null===(t=v.current)||void 0===t||t.setLatLng([S.lat,S.lng]),W(k,S))},[k,S.lat,S.lng]),a.useEffect(()=>{function e(){if(b.current)try{"local"===B&&b.current.setRadius(P()),"global"===B&&b.current.setRadius(z())}catch(e){}}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[B]),a.useEffect(()=>{let e=y.trim();if(!d)return;if(e.length<1){L([]);return}let t=new AbortController,r=setTimeout(async()=>{try{let r="/api/places?q=".concat(encodeURIComponent(e),"&limit=12"),n=await fetch(r,{headers:{Accept:"application/json"},signal:t.signal}),a=await n.json();L(a.results||[])}catch(e){}},250);return()=>{clearTimeout(r),t.abort()}},[d,y]);let V=a.useMemo(()=>{let e=y.trim().toLowerCase();return e?E.filter(t=>t.name.toLowerCase().includes(e)).slice(0,20):[]},[y,E]);return(0,n.jsxs)(s.u_,{open:d,onClose:u,dark:g,size:"md",ariaLabel:(0,o.t)("change_location",w),children:[(0,n.jsxs)(s.xB,{dark:g,children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:(0,o.t)("change_location",w)}),(0,n.jsx)(s.ol,{onClose:u,dark:g,label:(0,o.t)("close",w)})]}),(0,n.jsxs)(s.fe,{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,n.jsxs)("div",{className:"sm:col-span-2",children:[(0,n.jsx)("label",{className:(0,l.cn)("text-xs mb-1 block",g?"text-neutral-400":"text-neutral-500"),children:(0,o.t)("location",w)}),(0,n.jsxs)("div",{className:(0,l.cn)("relative rounded-xl border",g?"border-neutral-700 bg-neutral-800":"border-neutral-300 bg-white"),children:[(0,n.jsx)("input",{value:y,onChange:e=>{N(e.target.value)},placeholder:(0,o.t)("enter_city",w),className:(0,l.cn)("w-full rounded-xl px-4 py-3 text-sm bg-transparent",g?"text-neutral-100":"text-neutral-900")}),V.length>0&&(0,n.jsx)("div",{className:(0,l.cn)("absolute left-0 right-0 top-full z-50 mt-1 max-h-60 overflow-auto rounded-xl border shadow",g?"border-neutral-700 bg-neutral-900":"border-neutral-300 bg-white"),children:V.map((e,t)=>(0,n.jsx)("button",{onClick:()=>{D({name:e.name,lat:e.lat,lng:e.lng}),I(!1);try{localStorage.setItem("usingMyLocation","0")}catch(e){}N(e.name),L([])},className:"block w-full text-left px-4 py-2 text-sm hover:bg-orange-500/10",children:e.name},"".concat(e.name,"-").concat(t)))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:(0,l.cn)("text-xs mb-1 block",g?"text-neutral-400":"text-neutral-500"),children:(0,o.t)("radius",w)}),(0,n.jsxs)("select",{value:k,onChange:e=>C(Number(e.target.value)),className:(0,l.cn)("w-full rounded-xl px-4 py-3 text-sm border appearance-none bg-no-repeat pr-10",g?"border-neutral-700 bg-neutral-800 text-neutral-100":"border-neutral-300 bg-white text-neutral-900"),style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e\")",backgroundPosition:"right 1.25rem center",backgroundSize:"1.25em 1.25em"},children:[[2,5,10,25,50,100,250,500].map(e=>(0,n.jsxs)("option",{value:e,children:[e," km"]},e)),(0,n.jsx)("option",{value:0,children:(0,o.t)("all_listings_globally",w)})]})]})]}),(0,n.jsxs)("div",{className:"rounded-xl overflow-hidden relative z-0 bb-map",style:{height:280},children:[(0,n.jsx)("div",{ref:f,className:"w-full h-full"}),(0,n.jsx)("button",{type:"button","aria-label":"Use my location",onClick:async()=>{try{A(!0),await new Promise((e,t)=>{if(!("geolocation"in navigator))return t(Error("no_geo"));navigator.geolocation.getCurrentPosition(t=>{let{latitude:r,longitude:n}=t.coords;D({name:(0,o.t)("my_location",w),lat:r,lng:n}),I(!0);try{localStorage.setItem("usingMyLocation","1")}catch(e){}N(""),(async()=>{let t=await H(r,n);if(null==t?void 0:t.name){D({name:t.name,lat:t.lat,lng:t.lng}),I(!0);try{localStorage.setItem("usingMyLocation","1")}catch(e){}N("")}else{let e="".concat(r.toFixed(4),", ").concat(n.toFixed(4));D({name:e,lat:r,lng:n}),I(!0);try{localStorage.setItem("usingMyLocation","1")}catch(e){}N("")}e()})()},()=>t(Error("denied")),{enableHighAccuracy:!0,maximumAge:1e4,timeout:1e4})})}catch(e){}finally{A(!1)}},className:(0,l.cn)("absolute right-3 top-3 z-[1] inline-flex items-center justify-center rounded-xl shadow px-3 py-2 transition-colors",T?"bg-orange-500 text-white border border-orange-500":"bg-black text-white border border-black"),title:(0,o.t)("change",w),children:(0,n.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:(0,n.jsx)("path",{d:"M12 2L3 21l9-4 9 4-9-19z"})})})]})]}),(0,n.jsxs)(s.mz,{dark:g,children:[(0,n.jsx)("button",{onClick:u,className:(0,l.cn)("rounded-xl px-4 py-2 text-sm",g?"bg-neutral-800 text-neutral-300":"bg-neutral-100 text-neutral-700"),children:(0,o.t)("cancel",w)}),(0,n.jsx)("button",{onClick:()=>{try{localStorage.setItem("usingMyLocation",T?"1":"0")}catch(e){}h(S,k)},className:"rounded-xl px-5 py-2 text-sm font-semibold text-white bg-gradient-to-r from-orange-500 to-red-500",children:(0,o.t)("apply",w)})]})]})}},591:function(e,t,r){r.d(t,{LogoMinimal:function(){return a}});var n=r(7437);function a(e){let{dark:t}=e,r=t?"#f97316":"#ea580c";return(0,n.jsx)("div",{className:"grid h-8 w-8 place-items-center",children:(0,n.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 28 28","aria-label":"bitsbarter logo",children:[(0,n.jsx)("circle",{cx:"14",cy:"14",r:"12",fill:t?"#0a0a0a":"#ffffff",stroke:r,strokeWidth:"2"}),(0,n.jsx)("circle",{cx:"18",cy:"10",r:"2",fill:r})]})})}r(2265)},9320:function(e,t,r){r.d(t,{fe:function(){return d},mz:function(){return u},ol:function(){return x},r6:function(){return c},u_:function(){return o},xB:function(){return i}});var n=r(7437),a=r(2265),l=r(9354);let s={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-5xl",xl:"max-w-6xl"};function o(e){let{open:t,onClose:r,dark:o,size:i="md",className:c,overlayClassName:d,panelClassName:u,closeOnOverlay:x=!0,ariaLabel:m,maxHeightVh:h=90,children:g}=e,f=a.useRef(null);return(a.useEffect(()=>{function e(e){"Escape"===e.key&&r()}if(t)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,r]),t)?(0,n.jsx)("div",{ref:f,className:(0,l.cn)("fixed inset-0 z-50 flex items-center justify-center p-4","bg-black/60",d),role:"dialog","aria-modal":"true","aria-label":m,onMouseDown:e=>{x&&e.target===f.current&&r()},children:(0,n.jsx)("div",{className:(0,l.cn)("w-full overflow-hidden rounded-2xl border",o?"border-neutral-800 bg-neutral-950 text-neutral-100":"border-neutral-200 bg-white text-neutral-900",s[i],u,c),style:{maxHeight:"".concat(h,"vh")},children:g})}):null}function i(e){let{children:t,dark:r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex items-center justify-between border-b px-6 py-4",r?"border-neutral-900":"border-neutral-200"),children:t})}function c(e){let{children:t}=e;return(0,n.jsx)("h2",{className:"text-lg font-bold",children:t})}function d(e){let{children:t,maxHeightSubtract:r=120,className:a}=e;return(0,n.jsx)("div",{className:(0,l.cn)("px-6 py-4 overflow-auto",a),style:{maxHeight:"calc(90vh - ".concat(r,"px)")},children:t})}function u(e){let{children:t,dark:r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex items-center justify-end gap-3 px-6 py-4 border-t",r?"border-neutral-900":"border-neutral-200"),children:t})}function x(e){let{onClose:t,dark:r,label:a}=e;return(0,n.jsx)("button",{onClick:t,className:(0,l.cn)("rounded-lg px-3 py-1",r?"text-neutral-400 hover:bg-neutral-900 hover:text-neutral-200":"text-neutral-600 hover:bg-neutral-100 hover:text-neutral-800"),children:a})}},4520:function(e,t,r){r.d(t,{Nav:function(){return x}});var n=r(7437),a=r(2265),l=r(4887),s=r(8969),o=r(6062),i=r(6248),c=r(8070),d=r(357);function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function x(e){let{onPost:t,user:r,onAuth:x,avatarUrl:m}=e,{theme:h}=(0,c.Fg)(),g="dark"===h,f="staging"===d.env.NEXT_PUBLIC_BRANCH,p=(0,o.J)(),[b,v]=(0,a.useState)(!1),j=a.useRef(null),[w,y]=(0,a.useState)(!1);function N(e){try{localStorage.setItem("lang",e);let t=document.documentElement.classList.contains("dark")?"dark":"light";localStorage.setItem("theme",t)}catch(e){}(0,i.Wg)(e);try{let{pathname:t,search:r,hash:n}=window.location,a=t.split("/").filter(Boolean),l=a[0];l&&["en","fr","es","de"].includes(l)&&a.shift();let s="/"+[e,...a].join("/");window.location.assign(s+(r||"")+(n||""))}catch(e){}}a.useEffect(()=>{let e=e=>{let t=e.target;b&&j.current&&t&&!j.current.contains(t)&&v(!1)};return document.addEventListener("click",e,!0),document.addEventListener("touchstart",e,!0),()=>{document.removeEventListener("click",e,!0),document.removeEventListener("touchstart",e,!0)}},[b]);let k=w?(0,l.createPortal)((0,n.jsx)("div",{className:"fixed inset-0 z-[9999]",onClick:()=>y(!1),children:(0,n.jsx)("div",{className:"absolute right-4 top-16 w-80",onClick:e=>e.stopPropagation(),children:(0,n.jsx)("div",{className:"rounded-2xl border shadow-2xl overflow-hidden border-neutral-300/50 bg-white dark:border-neutral-700/50 dark:bg-neutral-900",children:(0,n.jsxs)("div",{className:"p-4 space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-200",children:(0,i.t)("menu_display_prices_in",p)}),(0,n.jsx)(s.rs,{})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-200",children:(0,i.t)("menu_display_theme",p)}),(0,n.jsx)(s.Tl,{})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-200",children:(0,i.t)("menu_layout_view",p)}),(0,n.jsx)(s.fj,{})]})]})})})}),document.body):null;return(0,n.jsx)("nav",{className:u("sticky top-0 z-50 relative",g?"border-b border-neutral-900 bg-neutral-950":"border-b border-neutral-200 bg-white"),children:(0,n.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-4 py-3",children:[(0,n.jsx)("div",{className:"flex items-center gap-3",children:(0,n.jsx)("a",{href:"/".concat(p),"aria-label":"Home",className:"inline-flex items-center gap-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("img",{src:"/Bitsbarterlogo.svg",alt:"Bitsbarter",className:"h-7 w-7 md:h-8 md:w-8"}),(0,n.jsxs)("span",{className:u("text-2xl md:text-3xl tracking-tight leading-none",g?"text-white":"text-black"),style:{fontFamily:"Ubuntu, system-ui, -apple-system, Segoe UI, Roboto, Arial"},children:[(0,n.jsx)("span",{className:"font-bold text-orange-500",children:"bits"}),(0,n.jsx)("span",{className:u("font-bold",g?"text-white":"text-black"),children:"barter"})]}),(0,n.jsx)("span",{className:u("hidden rounded-full px-2 py-0.5 text-xs sm:inline",g?"border border-neutral-800 text-neutral-400":"border border-neutral-300 text-neutral-600"),children:"BETA"}),f&&(0,n.jsx)("span",{className:"hidden sm:inline rounded-full bg-red-600 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-white shadow",children:"STAGING"})]})})}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{ref:j,className:"relative hidden sm:block mr-2",children:[(0,n.jsx)("button",{onClick:()=>v(e=>!e),"aria-label":"Language",className:u("px-2 py-1 rounded-md text-sm",g?"text-neutral-300 hover:bg-neutral-900":"text-neutral-700 hover:bg-neutral-100"),children:"fr"===p?"\uD83C\uDDEB\uD83C\uDDF7":"es"===p?"\uD83C\uDDEA\uD83C\uDDF8":"de"===p?"\uD83C\uDDE9\uD83C\uDDEA":"\uD83C\uDDFA\uD83C\uDDF8"}),b&&(0,n.jsxs)("div",{className:u("absolute right-0 mt-2 w-44 rounded-xl border shadow-2xl z-50",g?"border-neutral-700/50 bg-neutral-900/95":"border-neutral-300/50 bg-white/95"),children:[(0,n.jsx)("button",{onClick:()=>{N("en"),v(!1)},className:u("w-full text-left px-3 py-2 text-sm",g?"text-white hover:bg-neutral-800/40":"text-neutral-900 hover:bg-neutral-100"),children:"\uD83C\uDDFA\uD83C\uDDF8 English"}),(0,n.jsx)("button",{onClick:()=>{N("fr"),v(!1)},className:u("w-full text-left px-3 py-2 text-sm",g?"text-white hover:bg-neutral-800/40":"text-neutral-900 hover:bg-neutral-100"),children:"\uD83C\uDDEB\uD83C\uDDF7 Fran\xe7ais"}),(0,n.jsx)("button",{onClick:()=>{N("es"),v(!1)},className:u("w-full text-left px-3 py-2 text-sm",g?"text-white hover:bg-neutral-800/40":"text-neutral-900 hover:bg-neutral-100"),children:"\uD83C\uDDEA\uD83C\uDDF8 Espa\xf1ol"}),(0,n.jsx)("button",{onClick:()=>{N("de"),v(!1)},className:u("w-full text-left px-3 py-2 text-sm",g?"text-white hover:bg-neutral-800/40":"text-neutral-900 hover:bg-neutral-100"),children:"\uD83C\uDDE9\uD83C\uDDEA Deutsch"})]})]}),r&&(0,n.jsx)("button",{onClick:t,className:"rounded-xl bg-gradient-to-r from-orange-500 to-red-500 px-4 py-2 text-sm font-semibold text-white shadow shadow-orange-500/30 transition hover:from-orange-400 hover:to-red-400",children:(0,i.t)("post_listing",p)}),r&&(0,n.jsx)(s.yo,{dark:g}),r?(0,n.jsx)("a",{href:"/".concat(p,"/profile"),className:"inline-flex items-center gap-2 rounded-full px-2 py-1 text-sm font-semibold text-white hover:opacity-90",children:m?(0,n.jsx)("img",{src:m,alt:"avatar",className:"h-8 w-8 rounded-full border border-neutral-700"}):(0,n.jsx)("span",{className:"rounded-full bg-neutral-800 px-3 py-1",children:"My Profile"})}):(0,n.jsx)("button",{onClick:x,className:"rounded-xl bg-gradient-to-r from-orange-500 to-red-500 px-4 py-2 text-sm font-semibold text-white shadow shadow-orange-500/30 transition hover:from-orange-400 hover:to-red-400",children:(0,i.t)("sign_in",p)}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("button",{onClick:()=>y(e=>!e),"aria-expanded":w,"aria-haspopup":"menu",className:u("rounded-xl px-3 py-2 text-base font-bold shadow ring-1",g?"text-neutral-200 hover:bg-neutral-900 ring-neutral-800":"text-neutral-800 hover:bg-neutral-100 ring-neutral-300"),children:"☰"}),k]})]})]})})}},7834:function(e,t,r){r.d(t,{NewListingModal:function(){return u}});var n=r(7437),a=r(2265),l=r(9320),s=r(6248),o=r(6062);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function c(e){return new Intl.NumberFormat(void 0).format(e)}function d(e){let{label:t,children:r}=e;return(0,n.jsxs)("label",{className:"block space-y-2",children:[(0,n.jsx)("span",{className:"text-sm",children:t}),r]})}function u(e){let{onClose:t,onPublish:r,dark:u}=e,[x,m]=(0,a.useState)(1),[h,g]=(0,a.useState)(!1),[f,p]=(0,a.useState)({title:"",desc:"",priceSats:0,category:"Electronics",location:"Toronto, ON",lat:43.653,lng:-79.383,imageUrl:"",type:"sell"}),b=500+(h?2e3:0),v="lnbc".concat(b,"n1p").concat(Math.random().toString(36).slice(2,10),"..."),j=u?"border-neutral-800 bg-neutral-900 text-neutral-100 placeholder-neutral-500 focus:border-orange-500":"border-neutral-300 bg-white text-neutral-900 placeholder-neutral-400 focus:border-orange-500";return(0,n.jsxs)(l.u_,{open:!0,onClose:t,dark:u,size:"md",ariaLabel:"Post a listing",children:[(0,n.jsxs)(l.xB,{dark:u,children:[(0,n.jsx)(l.r6,{children:"Post a listing"}),(0,n.jsx)(l.ol,{onClose:t,dark:u})]}),1===x&&(0,n.jsxs)(l.fe,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,n.jsx)(d,{label:"Title",children:(0,n.jsx)("input",{value:f.title,onChange:e=>p({...f,title:e.target.value}),className:i("w-full rounded-xl px-3 py-2 focus:outline-none",j),placeholder:"e.g., Antminer S19j Pro 100TH"})}),(0,n.jsx)(d,{label:"Ad type",children:(0,n.jsxs)("select",{value:f.type,onChange:e=>p({...f,type:e.target.value}),className:i("w-full rounded-xl px-3 py-2 focus:outline-none",j),children:[(0,n.jsx)("option",{value:"sell",children:(0,s.t)("selling",(0,o.J)())}),(0,n.jsx)("option",{value:"want",children:(0,s.t)("looking_for",(0,o.J)())})]})})]}),(0,n.jsx)(d,{label:"Description",children:(0,n.jsx)("textarea",{value:f.desc,onChange:e=>p({...f,desc:e.target.value}),rows:4,className:i("w-full rounded-xl px-3 py-2 focus:outline-none",j),placeholder:"Condition, accessories, pickup preferences, etc."})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,n.jsx)(d,{label:"Category",children:(0,n.jsx)("select",{value:f.category,onChange:e=>p({...f,category:e.target.value}),className:i("w-full rounded-xl px-3 py-2 focus:outline-none",j),children:["Electronics","Mining Gear","Home & Garden","Sports & Bikes","Tools","Games & Hobbies","Furniture","Services"].map(e=>(0,n.jsx)("option",{children:e},e))})}),(0,n.jsx)(d,{label:"Location (neighbourhood/city)",children:(0,n.jsx)("input",{value:f.location,onChange:e=>p({...f,location:e.target.value}),className:i("w-full rounded-xl px-3 py-2 focus:outline-none",j),placeholder:"e.g., North York, ON"})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,n.jsx)(d,{label:"Lat",children:(0,n.jsx)("input",{type:"number",value:f.lat,onChange:e=>p({...f,lat:Number(e.target.value)}),className:i("w-full rounded-xl px-3 py-2 focus:outline-none",j)})}),(0,n.jsx)(d,{label:"Lng",children:(0,n.jsx)("input",{type:"number",value:f.lng,onChange:e=>p({...f,lng:Number(e.target.value)}),className:i("w-full rounded-xl px-3 py-2 focus:outline-none",j)})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,n.jsx)(d,{label:"Price (sats)",children:(0,n.jsx)("input",{type:"number",min:0,value:f.priceSats,onChange:e=>p({...f,priceSats:Number(e.target.value||0)}),className:i("w-full rounded-xl px-3 py-2 focus:outline-none",j),placeholder:"e.g., 5200000"})}),(0,n.jsx)(d,{label:"Photo URL (temporary for demo)",children:(0,n.jsx)("input",{value:f.imageUrl,onChange:e=>p({...f,imageUrl:e.target.value}),className:i("w-full rounded-xl px-3 py-2 focus:outline-none",j),placeholder:"Paste an image URL"})})]}),(0,n.jsx)("div",{className:i("rounded-xl p-3 text-xs",u?"border border-neutral-800 bg-neutral-900 text-neutral-400":"border border-neutral-300 bg-white text-neutral-600"),children:"All coordination happens in in-app chat. Keep correspondence in-app; off-app contact is against our guidelines."}),(0,n.jsxs)("div",{className:i("flex items-center justify-between rounded-xl p-3",u?"border border-neutral-800 bg-neutral-900":"border border-neutral-300 bg-white"),children:[(0,n.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,n.jsx)("input",{type:"checkbox",checked:h,onChange:e=>g(e.target.checked)}),(0,n.jsxs)("span",{children:["Boost for 24h on homepage ",(0,n.jsxs)("span",{className:"font-semibold text-orange-500",children:["( + ",c(2e3)," sats )"]})]})]}),(0,n.jsx)("span",{className:i("text-sm",u?"text-neutral-400":"text-neutral-600"),children:"More views, faster responses"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("span",{className:i("text-sm",u?"text-neutral-400":"text-neutral-600"),children:["Listing fee: ",(0,n.jsxs)("span",{className:i("font-semibold",u?"text-neutral-200":"text-neutral-900"),children:[c(500)," sats"]})]}),(0,n.jsx)("button",{onClick:()=>m(2),disabled:!f.title||!f.priceSats,className:i("rounded-xl px-5 py-3 font-semibold transition",f.title&&f.priceSats?"bg-orange-500 text-neutral-950 shadow shadow-orange-500/30 hover:bg-orange-400":u?"cursor-not-allowed bg-neutral-800 text-neutral-600":"cursor-not-allowed bg-neutral-200 text-neutral-500"),children:"Continue to listing fee"})]})]}),2===x&&(0,n.jsxs)(l.fe,{className:"space-y-4",children:[(0,n.jsx)("h3",{className:"text-base font-semibold",children:"Pay to publish"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,n.jsxs)("div",{className:i("rounded-xl p-4",u?"border border-neutral-800 bg-neutral-900":"border border-neutral-300 bg-white"),children:[(0,n.jsxs)("p",{className:i("text-sm",u?"text-neutral-300":"text-neutral-700"),children:["Send ",(0,n.jsxs)("span",{className:"font-bold text-orange-500",children:[c(b)," sats"]})," to the Lightning invoice below:"]}),(0,n.jsx)("div",{className:i("mt-3 rounded-lg p-3 text-xs",u?"bg-neutral-800 text-neutral-300":"bg-neutral-100 text-neutral-700"),children:v}),(0,n.jsx)("p",{className:i("mt-3 text-xs",u?"text-neutral-500":"text-neutral-600"),children:"* Demo invoice. In production, generate BOLT11/lnurl via your LN backend."})]}),(0,n.jsxs)("div",{className:i("rounded-xl p-4 text-sm",u?"border border-neutral-800 bg-neutral-900":"border border-neutral-300 bg-white"),children:[(0,n.jsx)("p",{className:i(u?"text-neutral-300":"text-neutral-700"),children:"Summary"}),(0,n.jsxs)("ul",{className:"mt-2 space-y-1 opacity-90",children:[(0,n.jsxs)("li",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Ad type"}),(0,n.jsx)("span",{children:"sell"===f.type?(0,s.t)("selling",(0,o.J)()):(0,s.t)("looking_for",(0,o.J)())})]}),(0,n.jsxs)("li",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Listing fee"}),(0,n.jsxs)("span",{children:[c(500)," sats"]})]}),h&&(0,n.jsxs)("li",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Boost (24h)"}),(0,n.jsxs)("span",{children:[c(2e3)," sats"]})]}),(0,n.jsxs)("li",{className:"mt-2 flex justify-between font-semibold",children:[(0,n.jsx)("span",{children:"Total"}),(0,n.jsxs)("span",{className:"text-orange-500",children:[c(b)," sats"]})]})]}),(0,n.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>m(1),className:i("rounded-xl px-4 py-2",u?"border border-neutral-800 hover:bg-neutral-900":"border border-neutral-300 hover:bg-neutral-100"),children:"Back"}),(0,n.jsx)("button",{onClick:()=>{r({id:"temp",title:f.title.trim(),desc:f.desc.trim(),priceSats:Number(f.priceSats)||0,category:f.category,location:f.location.trim()||"Toronto, ON",lat:f.lat,lng:f.lng,images:f.imageUrl?[f.imageUrl]:["https://images.unsplash.com/photo-1549924231-f129b911e442?q=80&w=1600&auto=format&fit=crop"],boostedUntil:h?Date.now()+864e5:0,seller:{name:"you",score:0,deals:0,rating:5,verifications:{email:!0},onTimeRelease:1},createdAt:Date.now(),type:f.type})},className:"rounded-xl bg-gradient-to-r from-amber-400 to-orange-500 px-5 py-2.5 font-semibold text-neutral-950 shadow shadow-orange-500/30 hover:from-amber-300 hover:to-orange-400",children:"I've paid — Publish"})]})]})]})]})]})}},2539:function(e,t,r){r.d(t,{NotificationMenu:function(){return i}});var n=r(7437),a=r(2265),l=r(8070),s=r(6062),o=r(6248);function i(e){let{dark:t}=e,[r,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[u,x]=(0,a.useState)(0),m=(0,a.useRef)(null),{theme:h}=(0,l.Fg)(),g=(0,s.J)();(0,a.useEffect)(()=>{try{let e=localStorage.getItem("notifications");if(e){let t=JSON.parse(e);d(t),x(t.filter(e=>!e.read).length);return}}catch(e){console.warn("Failed to load notifications from localStorage:",e)}let e=[{id:"1",type:"message",title:"New message from John",message:"Hi! I'm interested in your Bitcoin listing...",timestamp:Date.now()-18e5,read:!1,actionUrl:"/chat"},{id:"2",type:"update",title:"Escrow completed",message:"Your transaction with Sarah has been completed successfully.",timestamp:Date.now()-72e5,read:!1,actionUrl:"/profile"},{id:"3",type:"system",title:"Welcome to bitsbarter!",message:"Your account has been verified. Start trading with Bitcoin today!",timestamp:Date.now()-864e5,read:!0}];d(e),x(e.filter(e=>!e.read).length)},[]),(0,a.useEffect)(()=>{x(c.filter(e=>!e.read).length)},[c]),(0,a.useEffect)(()=>{function e(e){m.current&&!m.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let f=e=>{d(t=>{let r=t.map(t=>t.id===e?{...t,read:!0}:t);try{localStorage.setItem("notifications",JSON.stringify(r))}catch(e){console.warn("Failed to save notifications to localStorage:",e)}return r}),x(e=>Math.max(0,e-1))},p=e=>{switch(e){case"message":return(0,n.jsx)("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})});case"update":return(0,n.jsx)("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"system":return(0,n.jsx)("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900/20 rounded-full flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}},b=e=>{let t=Date.now()-e,r=Math.floor(t/6e4),n=Math.floor(t/36e5);return r<1?"Just now":r<60?"".concat(r,"m ago"):n<24?"".concat(n,"h ago"):"".concat(Math.floor(t/864e5),"d ago")};return(0,n.jsxs)("div",{className:"relative",ref:m,children:[(0,n.jsxs)("button",{onClick:()=>i(!r),className:"relative p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200","aria-label":"Notifications",children:[(0,n.jsx)("svg",{className:"w-6 h-6 text-neutral-600 dark:text-neutral-400",fill:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})}),u>0&&(0,n.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:u>9?"9+":u})]}),r&&(0,n.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-neutral-900 rounded-xl border border-neutral-200 dark:border-neutral-700 shadow-xl z-50",children:[(0,n.jsx)("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:(0,o.t)("notifications",g)}),u>0&&(0,n.jsx)("button",{onClick:()=>{d(e=>{let t=e.map(e=>({...e,read:!0}));try{localStorage.setItem("notifications",JSON.stringify(t))}catch(e){console.warn("Failed to save notifications to localStorage:",e)}return t}),x(0)},className:"text-sm text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 font-medium",children:(0,o.t)("mark_all_as_read",g)})]})}),(0,n.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===c.length?(0,n.jsxs)("div",{className:"p-6 text-center",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-neutral-100 dark:bg-neutral-800 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,n.jsx)("svg",{className:"w-6 h-6 text-neutral-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,n.jsx)("p",{className:"text-neutral-500 dark:text-neutral-400",children:(0,o.t)("no_notifications",g)})]}):(0,n.jsx)("div",{className:"divide-y divide-neutral-200 dark:divide-neutral-700",children:c.map(e=>(0,n.jsx)("div",{className:"p-4 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors duration-200 cursor-pointer ".concat(e.read?"":"bg-blue-50 dark:bg-blue-900/10"),onClick:()=>{e.actionUrl&&(window.location.href=e.actionUrl),e.read||f(e.id),i(!1)},children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[p(e.type),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsx)("h4",{className:"text-sm font-medium ".concat(e.read?"text-neutral-700 dark:text-neutral-300":"text-neutral-900 dark:text-white"),children:e.title}),!e.read&&(0,n.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]}),(0,n.jsx)("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1 line-clamp-2",children:e.message}),(0,n.jsx)("p",{className:"text-xs text-neutral-500 dark:text-neutral-500 mt-2",children:b(e.timestamp)})]})]})},e.id))})}),c.length>0&&(0,n.jsx)("div",{className:"p-3 border-t border-neutral-200 dark:border-neutral-700",children:(0,n.jsx)("a",{href:"/notifications",className:"block text-center text-sm text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 font-medium",children:(0,o.t)("view_all_notifications",g)})})]})]})}},6111:function(e,t,r){r.d(t,{PriceBlock:function(){return l}});var n=r(7437);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function l(e){let{sats:t,unit:r,btcCad:l,dark:s,size:o="sm",compactFiat:i=!1}=e,c="sats"===r?"".concat(new Intl.NumberFormat(void 0).format(t)," sats"):"₿ ".concat((t/1e8).toLocaleString(void 0,{maximumFractionDigits:8})),d=l?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CAD";return new Intl.NumberFormat(void 0,{style:"currency",currency:t,maximumFractionDigits:2}).format(e)}(t/1e8*l,"CAD"):null;return(0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsx)("span",{className:a("font-bold text-orange-500","lg"===o?"text-2xl":"md"===o?"text-xl":"text-base"),children:c}),d&&(0,n.jsxs)("span",{className:a(i?"text-xs":"lg"===o?"text-base":"md"===o?"text-sm":"text-xs",s?"text-neutral-400":"text-neutral-600"),children:["~",d]})]})}r(2265)},5302:function(e,t,r){r.d(t,{SafetyTipsSection:function(){return l}});var n=r(7437);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function l(e){let{dark:t}=e;return(0,n.jsx)("section",{id:"tips",className:"mx-auto mt-20 max-w-7xl",children:(0,n.jsxs)("div",{className:a("rounded-3xl border-2 border-dashed p-8 backdrop-blur-sm",t?"border-neutral-700/50 bg-neutral-900/30":"border-neutral-300/50 bg-white/80"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,n.jsx)("div",{className:"text-3xl",children:"\uD83D\uDEE1️"}),(0,n.jsx)("h3",{className:a("text-2xl font-bold",t?"text-white":"text-neutral-900"),children:"Buyer & Seller Safety"})]}),(0,n.jsxs)("ul",{className:a("grid gap-4 md:grid-cols-2 text-base",t?"text-neutral-300":"text-neutral-700"),children:[(0,n.jsxs)("li",{className:"flex items-start gap-3",children:[(0,n.jsx)("span",{className:"text-orange-500 font-bold",children:"•"}),(0,n.jsxs)("span",{children:["Meet in a ",(0,n.jsx)("strong",{children:"very public"})," place: malls, caf\xe9s, or police e-commerce zones."]})]}),(0,n.jsxs)("li",{className:"flex items-start gap-3",children:[(0,n.jsx)("span",{className:"text-orange-500 font-bold",children:"•"}),(0,n.jsx)("span",{children:"Bring a friend or tell someone your meeting place and time."})]}),(0,n.jsx)("li",{className:"flex items-start gap-3",children:(0,n.jsxs)("span",{children:["Keep ",(0,n.jsx)("strong",{children:"all correspondence in-app"}),"; off-app contact is against our guidelines."]})}),(0,n.jsxs)("li",{className:"flex items-start gap-3",children:[(0,n.jsx)("span",{className:"text-orange-500 font-bold",children:"•"}),(0,n.jsx)("span",{children:"Inspect items in person; test devices and verify serial numbers."})]}),(0,n.jsxs)("li",{className:"flex items-start gap-3",children:[(0,n.jsx)("span",{className:"text-orange-500 font-bold",children:"•"}),(0,n.jsxs)("span",{children:["Prefer ",(0,n.jsx)("strong",{children:"Lightning escrow"})," over cash; confirm release only when satisfied."]})]}),(0,n.jsxs)("li",{className:"flex items-start gap-3",children:[(0,n.jsx)("span",{className:"text-orange-500 font-bold",children:"•"}),(0,n.jsx)("span",{children:"Trust your instincts — if something feels off, walk away and report the listing."})]})]})]})})}r(2265)},8448:function(e,t,r){r.d(t,{TermsSection:function(){return l}});var n=r(7437);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function l(e){let{dark:t}=e;return(0,n.jsx)("section",{id:"terms",className:"mx-auto mt-10 max-w-7xl",children:(0,n.jsxs)("div",{className:a("rounded-2xl border p-6",t?"border-neutral-800 bg-neutral-950":"border-neutral-300 bg-white"),children:[(0,n.jsx)("h3",{className:"text-lg font-bold",children:"Terms & Conditions"}),(0,n.jsxs)("div",{className:a("mt-3 space-y-3 text-sm",t?"text-neutral-300":"text-neutral-700"),children:[(0,n.jsx)("p",{children:"By using bitsbarter, you agree to keep all correspondence in-app for safety. Off-app contact may limit our ability to help in disputes."}),(0,n.jsx)("p",{children:"Listings must comply with local laws. You are responsible for ensuring legality and authenticity of items and services."}),(0,n.jsx)("p",{children:"Escrow is provided via Lightning hold invoices. Funds are released only when both parties confirm, or a mediator decides in good faith based on in-app evidence."}),(0,n.jsxs)("p",{id:"policy",children:[(0,n.jsx)("strong",{children:"Prohibited items"})," include: weapons, illicit drugs, stolen goods, counterfeit items, recalled/unsafe goods, and anything illegal in your jurisdiction."]}),(0,n.jsx)("p",{children:"We are a venue: transactions are between users. bitsbarter is not a bank and does not custody fiat. Bitcoin price estimates are informational only."}),(0,n.jsx)("p",{children:"Violations of these terms can result in deletion of content and/or account suspension."})]})]})})}r(2265)},6393:function(e,t,r){r.d(t,{ThemeToggle:function(){return s}});var n=r(7437),a=r(9354),l=r(8070);function s(){let{theme:e,toggleTheme:t}=(0,l.Fg)(),r="dark"===e;return(0,n.jsxs)("div",{className:"relative inline-flex rounded-2xl p-1 shadow-lg border border-neutral-300/50 backdrop-blur-sm bg-white/70 dark:bg-neutral-800/60",children:[(0,n.jsx)("div",{className:(0,a.cn)("absolute inset-1 rounded-xl bg-white shadow-md transition-all duration-300 ease-out",r?"translate-x-full":"translate-x-0"),style:{width:"calc(50% - 4px)"}}),(0,n.jsx)("button",{onClick:()=>r&&t(),className:(0,a.cn)("relative z-10 px-4 py-2 text-xs font-bold transition-all duration-300 rounded-xl hover:scale-105",r?"text-neutral-200 hover:text-neutral-50":"text-blue-600 font-extrabold"),title:"Switch to dark mode",children:"\uD83C\uDF19"}),(0,n.jsx)("button",{onClick:()=>!r&&t(),className:(0,a.cn)("relative z-10 px-4 py-2 text-xs font-bold transition-all duration-300 rounded-xl hover:scale-105",r?"text-yellow-400 font-extrabold":"text-neutral-600 hover:text-neutral-800"),title:"Switch to light mode",children:"☀️"})]})}},2699:function(e,t,r){r.d(t,{TypePill:function(){return s}});var n=r(7437);r(2265);var a=r(6248),l=r(6062);function s(e){let{type:t}=e,r=(0,l.J)();return"want"===t?(0,n.jsx)("span",{className:"inline-flex items-center rounded-full bg-fuchsia-600/90 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wide text-white shadow",children:(0,a.t)("looking_for",r)}):(0,n.jsx)("span",{className:"inline-flex items-center rounded-full bg-emerald-600/90 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wide text-white shadow",children:(0,a.t)("selling",r)})}},5181:function(e,t,r){r.d(t,{TypeToggle:function(){return o}});var n=r(7437);r(2265);var a=r(6248),l=r(6062);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function o(e){let{adType:t,setAdType:r,dark:o}=e,i=(0,l.J)();return(0,n.jsxs)("div",{className:s("flex rounded-2xl border backdrop-blur-sm",o?"border-neutral-700/50 bg-neutral-900/30":"border-neutral-300/50 bg-white/80"),children:[(0,n.jsx)("button",{onClick:()=>r("all"),className:s("px-4 py-3 text-sm border-r transition-all duration-200 hover:scale-105",o?"border-neutral-700/50":"border-neutral-300/50","all"===t?"text-orange-500 font-bold":"opacity-70 hover:opacity-100"),title:"All Types",children:(0,a.t)("all_listings",i)}),(0,n.jsx)("button",{onClick:()=>r("sell"),className:s("px-4 py-3 text-sm border-r transition-all duration-200 hover:scale-105",o?"border-neutral-700/50":"border-neutral-300/50","sell"===t?"text-emerald-500 font-bold":"opacity-70 hover:opacity-100"),title:"Selling Only",children:(0,a.t)("selling",i)}),(0,n.jsx)("button",{onClick:()=>r("want"),className:s("px-4 py-3 text-sm transition-all duration-200 hover:scale-105","want"===t?"text-fuchsia-500 font-bold":"opacity-70 hover:opacity-100"),title:"Looking For Only",children:(0,a.t)("looking_for",i)})]})}},1671:function(e,t,r){r.d(t,{UnitToggle:function(){return s}});var n=r(7437),a=r(9354),l=r(8070);function s(){let{unit:e,setUnit:t}=(0,l.eY)();return(0,n.jsxs)("div",{className:"relative inline-flex rounded-2xl bg-neutral-200/50 p-1 shadow-lg border border-neutral-300/50 backdrop-blur-sm",children:[(0,n.jsx)("div",{className:(0,a.cn)("absolute inset-1 rounded-xl bg-white shadow-md transition-all duration-300 ease-out","sats"===e?"translate-x-0":"translate-x-full"),style:{width:"calc(50% - 4px)"}}),(0,n.jsx)("button",{onClick:()=>t("sats"),className:(0,a.cn)("relative z-10 px-4 py-2 text-xs font-bold transition-all duration-300 rounded-xl hover:scale-105","sats"===e?"text-orange-700 font-extrabold":"text-neutral-600 hover:text-neutral-700"),children:"sats"}),(0,n.jsx)("button",{onClick:()=>t("BTC"),className:(0,a.cn)("relative z-10 px-4 py-2 text-xs font-bold transition-all duration-300 rounded-xl hover:scale-105","BTC"===e?"text-orange-700 font-extrabold":"text-neutral-600 hover:text-neutral-800"),children:"BTC"})]})}},3451:function(e,t,r){r.d(t,{ViewToggle:function(){return i}});var n=r(7437),a=r(9354),l=r(8070),s=r(6062),o=r(6248);function i(){let{layout:e,setLayout:t}=(0,l.$Y)(),r=(0,s.J)();return(0,n.jsxs)("div",{className:"relative inline-flex rounded-2xl bg-neutral-200/50 p-0.5 shadow-lg border border-neutral-300/50 backdrop-blur-sm",children:[(0,n.jsx)("div",{className:(0,a.cn)("absolute inset-1 rounded-xl bg-white shadow-md transition-all duration-300 ease-out","grid"===e?"translate-x-0":"translate-x-full"),style:{width:"calc(50% - 4px)"}}),(0,n.jsxs)("button",{onClick:()=>t("grid"),className:(0,a.cn)("relative z-10 px-4 py-1 text-xs font-bold transition-all duration-300 rounded-xl hover:scale-105","grid"===e?"text-orange-700 font-extrabold":"text-neutral-600 hover:text-neutral-700"),title:"Grid View",children:[(0,n.jsx)("span",{className:"text-lg",children:"⊞"}),(0,n.jsx)("span",{children:(0,o.t)("grid",r)})]}),(0,n.jsxs)("button",{onClick:()=>t("list"),className:(0,a.cn)("relative z-10 px-4 py-1 text-xs font-bold transition-all duration-300 rounded-xl hover:scale-105","list"===e?"text-orange-700 font-extrabold":"text-neutral-600 hover:text-neutral-700"),title:"List View",children:[(0,n.jsx)("span",{className:"text-lg",children:"☰"}),(0,n.jsx)("span",{children:(0,o.t)("list",r)})]})]})}},8969:function(e,t,r){r.d(t,{F8:function(){return m.LocationModal},Im:function(){return a.ChatModal},JL:function(){return i.Nav},Qb:function(){return n.AuthModal},Tl:function(){return d.ThemeToggle},Vs:function(){return c.NewListingModal},dF:function(){return l.ListingCard},dw:function(){return s.ListingModal},fj:function(){return x.ViewToggle},rs:function(){return u.UnitToggle},tE:function(){return o.ListingRow},yo:function(){return h.NotificationMenu}});var n=r(8223),a=r(858),l=r(6896),s=r(6096),o=r(2662);r(3779),r(591);var i=r(4520),c=r(7834);r(6111),r(5302),r(8448);var d=r(6393);r(2699),r(5181);var u=r(1671),x=r(3451);r(6094),r(8011);var m=r(4189);r(9966);var h=r(2539)},6062:function(e,t,r){r.d(t,{J:function(){return l}});var n=r(2265),a=r(6248);function l(){let[e,t]=(0,n.useState)(()=>(0,a.VQ)());return(0,n.useEffect)(()=>(0,a.Xi)(()=>t((0,a.VQ)())),[]),e}},8070:function(e,t,r){r.d(t,{$Y:function(){return x},Fg:function(){return d},SettingsProvider:function(){return i},eY:function(){return u},rV:function(){return c}});var n=r(7437),a=r(2265);let l={theme:"dark",unit:"sats",layout:"grid"};function s(e,t){switch(t.type){case"SET_THEME":return{...e,theme:t.payload};case"SET_UNIT":return{...e,unit:t.payload};case"SET_LAYOUT":return{...e,layout:t.payload};case"INITIALIZE":return t.payload;default:return e}}let o=(0,a.createContext)(null);function i(e){let{children:t}=e,[r,i]=(0,a.useReducer)(s,l);return(0,a.useEffect)(()=>{try{let e=function(){try{let e=localStorage.getItem("theme"),t=localStorage.getItem("priceUnit"),r=localStorage.getItem("layoutPref");return{theme:"light"===e||"dark"===e?e:l.theme,unit:"sats"===t||"BTC"===t?t:l.unit,layout:"grid"===r||"list"===r?r:l.layout}}catch(e){return console.warn("Failed to read settings from localStorage:",e),l}}();i({type:"INITIALIZE",payload:e});{let t="dark"===e.theme;document&&document.documentElement&&document.documentElement.classList.toggle("dark",t)}}catch(e){console.warn("Settings initialization failed:",e)}},[]),(0,a.useEffect)(()=>{try{let e="dark"===r.theme;document&&document.documentElement&&(document.documentElement.classList.toggle("dark",e),window.dispatchEvent(new Event("resize")))}catch(e){console.warn("Theme application failed:",e)}},[r.theme]),(0,n.jsx)(o.Provider,{value:{state:r,dispatch:i},children:t})}function c(){let e=(0,a.useContext)(o);if(!e)throw Error("useSettings must be used within a SettingsProvider");let{state:t,dispatch:r}=e;return{...t,setTheme:e=>{r({type:"SET_THEME",payload:e});try{localStorage.setItem("theme",e),window.dispatchEvent(new CustomEvent("bb:theme",{detail:e}))}catch(e){}},setUnit:e=>{r({type:"SET_UNIT",payload:e});try{localStorage.setItem("priceUnit",e),window.dispatchEvent(new CustomEvent("bb:unit",{detail:e}))}catch(e){}},setLayout:e=>{r({type:"SET_LAYOUT",payload:e});try{localStorage.setItem("layoutPref",e),window.dispatchEvent(new CustomEvent("bb:layout",{detail:e}))}catch(e){}},toggleTheme:()=>{let e="dark"===t.theme?"light":"dark";r({type:"SET_THEME",payload:e});try{localStorage.setItem("theme",e),window.dispatchEvent(new CustomEvent("bb:theme",{detail:e}))}catch(e){}}}}let d=()=>{let{theme:e,setTheme:t,toggleTheme:r}=c();return{theme:e,setTheme:t,toggleTheme:r}},u=()=>{let{unit:e,setUnit:t}=c();return{unit:e,setUnit:t}},x=()=>{let{layout:e,setLayout:t}=c();return{layout:e,setLayout:t}}},9354:function(e,t,r){r.d(t,{cn:function(){return l}});var n=r(4839),a=r(6164);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}}}]);
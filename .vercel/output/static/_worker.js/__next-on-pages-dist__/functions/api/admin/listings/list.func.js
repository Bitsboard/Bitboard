var X=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var ee=Object.prototype.hasOwnProperty;var te=(l,p)=>()=>(l&&(p=l(l=0)),p);var U=(l,p,F,D)=>{if(p&&typeof p=="object"||typeof p=="function")for(let f of Z(p))!ee.call(l,f)&&f!==F&&X(l,f,{get:()=>p[f],enumerable:!(D=z(p,f))||D.enumerable});return l},W=(l,p,F)=>(U(l,p,"default"),F&&U(F,p,"default"));var ae=l=>U(X({},"__esModule",{value:!0}),l);var j={};import*as Nt from"async_hooks";var Y=te(()=>{W(j,Nt)});import{__getNamedExports as se}from"../../../../../__next-on-pages-dist__/webpack/65350c40fb927cd816847882c65007ef.js";import{__getNamedExports as ne}from"../../../../../__next-on-pages-dist__/webpack/d146f456c84ad77aa2bdb7f4ffff385c.js";import{__getNamedExports as re}from"../../../../../__next-on-pages-dist__/webpack/0db62fc21f400f4ff93662ca787c3a50.js";import{__getNamedExports as ie}from"../../../../../__next-on-pages-dist__/webpack/0406212c5b03d4d7d56d829c11dc80f8.js";import{__getNamedExports as oe}from"../../../../../__next-on-pages-dist__/manifest/27d10e462fba646daaa29468a0656e12.js";var y=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/admin/listings/list"),V=se(y,y,y),_e=V.__chunk_5492,ce=V.__chunk_3059,J=ne(y,y,y),ue=J.__chunk_855,le=J.__chunk_3808,n=re(y,y,y),de=n.__chunk_6195,pe=n.__chunk_2067,ge=n.__chunk_1548,me=n.__chunk_2780,he=n.__chunk_5612,ye=n.__chunk_9614,xe=n.__chunk_3628,ke=n.__chunk_5403,De=n.__chunk_3,fe=n.__chunk_9814,Ne=n.__chunk_7114,Re=n.__chunk_7894,Ae=n.__chunk_4414,Te=n.__chunk_9307,Ee=n.__chunk_74,ve=n.__chunk_7257,Pe=n.__chunk_7398,Ie=n.__chunk_6839,be=n.__chunk_5027,Se=n.__chunk_2738,Le=n.__chunk_2113,Oe=n.__chunk_2860,$e=n.__chunk_7460,we=n.__chunk_8427,Ce=n.__chunk_8997,Fe=n.__chunk_8024,Ke=n.__chunk_2403,Be=n.__chunk_8690,Me=n.__chunk_6087,je=n.__chunk_6265,He=n.__chunk_8610,qe=n.__chunk_7959,Ue=n.__chunk_4303,We=n.__chunk_3326,Ge=n.__chunk_391,Qe=n.__chunk_8789,Xe=n.__chunk_552,Ye=n.__chunk_7649,Ve=n.__chunk_2501,Je=n.__chunk_6443,ze=n.__chunk_2034,Ze=n.__chunk_3131,x=ie(y,y,y),et=x.__chunk_5524,tt=x.__chunk_8536,at=x.__chunk_6765,st=x.__chunk_9859,nt=x.__chunk_4123,rt=x.__chunk_3412,it=x.__chunk_8978,ot=x.__chunk_1812,_t=x.__chunk_1673,ct=x.__chunk_5376,ut=x.__chunk_6617,lt=x.__chunk_5767,dt=x.__chunk_3109,pt=x.__chunk_641,gt=x.__chunk_5514,mt=x.__chunk_5257,ht=x.__chunk_1616,yt=x.__chunk_2328,G=oe(y,y,y),xt=G.__NEXT_FONT_MANIFEST,kt=G.__REACT_LOADABLE_MANIFEST,Dt=G.__BUILD_MANIFEST,Pt=((l,p,F)=>(p._ENTRIES={},l.__BUILD_MANIFEST=Dt,l.__REACT_LOADABLE_MANIFEST=kt,l.__NEXT_FONT_MANIFEST=xt,l.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",l.__PRERENDER_MANIFEST='{"version":4,"routes":{"/admin/users":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/admin/layout,_N_T_/admin/users/layout,_N_T_/admin/users/page,_N_T_/admin/users"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/admin/users","dataRoute":"/admin/users.rsc"},"/contact":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/contact/layout,_N_T_/contact/page,_N_T_/contact"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/contact","dataRoute":"/contact.rsc"},"/careers":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/careers/layout,_N_T_/careers/page,_N_T_/careers"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/careers","dataRoute":"/careers.rsc"},"/escrow":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/escrow/layout,_N_T_/escrow/page,_N_T_/escrow"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/escrow","dataRoute":"/escrow.rsc"},"/about":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/about/layout,_N_T_/about/page,_N_T_/about"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/about","dataRoute":"/about.rsc"},"/faq":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/faq/layout,_N_T_/faq/page,_N_T_/faq"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/faq","dataRoute":"/faq.rsc"},"/help":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/help/layout,_N_T_/help/page,_N_T_/help"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/help","dataRoute":"/help.rsc"},"/":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/page,_N_T_/"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/","dataRoute":"/index.rsc"},"/privacy":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/privacy/layout,_N_T_/privacy/page,_N_T_/privacy"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/privacy","dataRoute":"/privacy.rsc"},"/safety":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/safety/layout,_N_T_/safety/page,_N_T_/safety"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/safety","dataRoute":"/safety.rsc"},"/admin":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/admin/layout,_N_T_/admin/page,_N_T_/admin"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/admin","dataRoute":"/admin.rsc"},"/support":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/support/layout,_N_T_/support/page,_N_T_/support"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/support","dataRoute":"/support.rsc"},"/terms":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/terms/layout,_N_T_/terms/page,_N_T_/terms"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/terms","dataRoute":"/terms.rsc"},"/test-settings":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/test-settings/layout,_N_T_/test-settings/page,_N_T_/test-settings"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/test-settings","dataRoute":"/test-settings.rsc"},"/admin/listings":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/admin/layout,_N_T_/admin/listings/layout,_N_T_/admin/listings/page,_N_T_/admin/listings"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/admin/listings","dataRoute":"/admin/listings.rsc"},"/auth-success":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/auth-success/layout,_N_T_/auth-success/page,_N_T_/auth-success"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/auth-success","dataRoute":"/auth-success.rsc"},"/admin/chats":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/admin/layout,_N_T_/admin/chats/layout,_N_T_/admin/chats/page,_N_T_/admin/chats"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/admin/chats","dataRoute":"/admin/chats.rsc"},"/icon.svg":{"initialHeaders":{"cache-control":"public, immutable, no-transform, max-age=31536000","content-type":"image/svg+xml","x-next-cache-tags":"_N_T_/layout,_N_T_/icon.svg/layout,_N_T_/icon.svg/route,_N_T_/icon.svg"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/icon.svg","dataRoute":null},"/messages":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/messages/layout,_N_T_/messages/page,_N_T_/messages"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/messages","dataRoute":"/messages.rsc"}},"dynamicRoutes":{},"notFoundRoutes":[],"preview":{"previewModeId":"process.env.__NEXT_PREVIEW_MODE_ID","previewModeSigningKey":"process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY","previewModeEncryptionKey":"process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY"}}',(()=>{"use strict";var D={},f={};function r(t){var o=f[t];if(o!==void 0)return o.exports;var s=f[t]={exports:{}},g=!0;try{D[t](s,s.exports,r),g=!1}finally{g&&delete f[t]}return s.exports}r.m=D,r.amdO={},(()=>{var t=[];r.O=(o,s,g,h)=>{if(s){h=h||0;for(var d=t.length;d>0&&t[d-1][2]>h;d--)t[d]=t[d-1];t[d]=[s,g,h];return}for(var u=1/0,d=0;d<t.length;d++){for(var[s,g,h]=t[d],R=!0,T=0;T<s.length;T++)u>=h&&Object.keys(r.O).every(w=>r.O[w](s[T]))?s.splice(T--,1):(R=!1,h<u&&(u=h));if(R){t.splice(d--,1);var E=g();E!==void 0&&(o=E)}}return o}})(),r.n=t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return r.d(o,{a:o}),o},(()=>{var t,o=Object.getPrototypeOf?s=>Object.getPrototypeOf(s):s=>s.__proto__;r.t=function(s,g){if(1&g&&(s=this(s)),8&g||typeof s=="object"&&s&&(4&g&&s.__esModule||16&g&&typeof s.then=="function"))return s;var h=Object.create(null);r.r(h);var d={};t=t||[null,o({}),o([]),o(o)];for(var u=2&g&&s;typeof u=="object"&&!~t.indexOf(u);u=o(u))Object.getOwnPropertyNames(u).forEach(R=>d[R]=()=>s[R]);return d.default=()=>s,r.d(h,d),h}})(),r.d=(t,o)=>{for(var s in o)r.o(o,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})},r.e=()=>Promise.resolve(),r.g=function(){if(typeof p=="object")return p;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={5993:0};r.O.j=g=>t[g]===0;var o=(g,h)=>{var d,u,[R,T,E]=h,S=0;if(R.some($=>t[$]!==0)){for(d in T)r.o(T,d)&&(r.m[d]=T[d]);if(E)var O=E(r)}for(g&&g(h);S<R.length;S++)u=R[S],r.o(t,u)&&t[u]&&t[u][0](),t[u]=0;return r.O(O)},s=l.webpackChunk_N_E=l.webpackChunk_N_E||[];s.forEach(o.bind(null,0)),s.push=o.bind(null,s.push.bind(s))})()})(),(l.webpackChunk_N_E=l.webpackChunk_N_E||[]).push([[9531],{3131:Ze,2034:ze,6443:Je,2501:Ve,7649:Ye,552:Xe,8789:Qe,391:Ge,3326:We,4303:Ue,7959:qe,8610:He,6265:je,6087:Me,8690:Be,2403:Ke,8024:Fe,8997:Ce,8427:we,7460:$e,2860:Oe,2113:Le,2738:Se,5027:be,6839:Ie,7398:Pe,7257:ve,74:Ee,9307:Te,4414:Ae,7894:Re,7114:Ne,9814:fe,3:De,5403:ke,3628:xe,9614:ye,5612:he,2780:me,1548:ge}]),(l.webpackChunk_N_E=l.webpackChunk_N_E||[]).push([[2703],{2328:yt,1616:ht,5257:mt,5514:gt,641:pt,3109:dt,5767:lt,6617:ut,5376:ct,1673:_t,1812:ot,8978:it,3412:rt,4123:nt,9859:st,6765:at,8536:tt,5524:et}]),(l.webpackChunk_N_E=l.webpackChunk_N_E||[]).push([[7996],{2067:pe,6195:de,6782:(D,f,r)=>{"use strict";r.r(f),r.d(f,{ComponentMod:()=>H,default:()=>q});var t={};r.r(t),r.d(t,{GET:()=>T,runtime:()=>R});var o={};r.r(o),r.d(o,{originalPathname:()=>K,patchFetch:()=>w,requestAsyncStorage:()=>S,routeModule:()=>E,serverHooks:()=>$,staticGenerationAsyncStorage:()=>O});var s=r(3109),g=r(5514),h=r(2860),d=r(2113),u=r(5492);let R="edge";async function T(B){try{console.log("\u{1F50D} Admin Listings API: Request started"),console.log("\u{1F50D} Admin Listings API: Request URL:",B.url),console.log("\u{1F50D} Admin Listings API: Request method:",B.method);let m=new URL(B.url),L=Math.min(100,parseInt(m.searchParams.get("limit")??"20",10)||20),C=Math.max(0,parseInt(m.searchParams.get("offset")??"0",10)),b=m.searchParams.get("sortBy")??"createdAt",M=m.searchParams.get("sortOrder")??"desc",A=m.searchParams.get("q")||"",e=m.searchParams.get("id")||"";console.log("\u{1F50D} Admin Listings API: Parsed URL parameters - limit:",L,"offset:",C,"sortBy:",b,"sortOrder:",M,"searchQuery:",A,"searchById:",e),console.log("\u{1F50D} Admin Listings API: Raw limit param:",m.searchParams.get("limit")),console.log("\u{1F50D} Admin Listings API: Raw offset param:",m.searchParams.get("offset")),console.log("\u{1F50D} Admin Listings API: Raw sortBy param:",m.searchParams.get("sortBy")),console.log("\u{1F50D} Admin Listings API: Raw sortOrder param:",m.searchParams.get("sortOrder")),console.log("\u{1F50D} Admin Listings API: Attempting to get database binding...");let _=await Promise.resolve().then(r.t.bind(r,3808,23)).catch(()=>null);if(!_||typeof _.getRequestContext!="function")return console.log("\u{1F50D} Admin Listings API: Cloudflare adapter missing"),u.xk.json({success:!1,error:"Cloudflare adapter not available"},{status:500});let a=_.getRequestContext().env.DB;if(!a)return console.log("\u{1F50D} Admin Listings API: No database binding"),u.xk.json({success:!1,error:"Database connection not available"},{status:500});console.log("\u2705 Database connection established"),console.log("\u{1F50D} Admin Listings API: Database object type:",typeof a),console.log("\u{1F50D} Admin Listings API: Database object keys:",Object.keys(a)),console.log("\u{1F50D} Admin Listings API: Testing basic database functionality...");try{let c=await a.prepare("SELECT 1 as test").all();console.log("\u{1F50D} Admin Listings API: Basic test query successful:",c)}catch(c){return console.error("\u{1F50D} Admin Listings API: Basic test query failed:",c),console.error("\u{1F50D} Admin Listings API: Test error message:",c?.message),console.error("\u{1F50D} Admin Listings API: Test error stack:",c?.stack),u.xk.json({success:!1,error:"Database connection test failed"},{status:500})}console.log("\u{1F50D} Admin Listings API: Checking if listings table exists...");try{let c=await a.prepare("SELECT name FROM sqlite_master WHERE type='table' AND name='listings'").all();if(console.log("\u{1F50D} Admin Listings API: Table check result:",c),!c.results||c.results.length===0)return console.log("\u{1F50D} Admin Listings API: Listings table does not exist"),u.xk.json({success:!1,error:"Listings table not found"},{status:500})}catch(c){return console.error("\u{1F50D} Admin Listings API: Table check failed:",c),console.error("\u{1F50D} Admin Listings API: Table check error message:",c?.message),u.xk.json({success:!1,error:"Database table check failed"},{status:500})}console.log("\u{1F50D} Admin Listings API: Executing corrected query...");let i="",N=[];e?(i="WHERE l.id = ?",N.push(e)):A&&(i="WHERE l.title LIKE ? OR l.description LIKE ?",N.push(`%${A}%`,`%${A}%`));let k=`
      SELECT 
        l.id,
        l.title,
        l.description,
        l.price_sat AS priceSat,
        COALESCE(l.pricing_type, 'fixed') AS pricingType,
        l.ad_type AS adType,
        l.category,
        l.posted_by AS postedBy,
        COALESCE(u.username, l.posted_by) AS username,
        l.created_at AS createdAt,
        l.updated_at AS updatedAt,
        l.status,
        l.image_url AS imageUrl,
        l.location,
        COALESCE(l.views, 0) AS views,
        0 AS favorites,
        COALESCE(chat_counts.chat_count, 0) AS replies
      FROM listings l
      LEFT JOIN users u ON l.posted_by = u.id
      LEFT JOIN (
        SELECT 
          listing_id,
          COUNT(*) AS chat_count
        FROM chats
        GROUP BY listing_id
      ) chat_counts ON l.id = chat_counts.listing_id
      ${i}
      ORDER BY ${{createdAt:"l.created_at",priceSat:"l.price_sat",views:"views",replies:"COALESCE(chat_counts.chat_count, 0)"}[b]||"l.created_at"} ${M==="asc"?"ASC":"DESC"}
      LIMIT ? OFFSET ?
    `;console.log("\u{1F50D} Admin Listings API: Executing query with limit:",L,"offset:",C),console.log("\u{1F50D} Admin Listings API: Query:",k),console.log("\u{1F50D} Admin Listings API: Bind params:",N);try{let c=await a.prepare(k).bind(...N,L,C).all();console.log("\u{1F50D} Admin Listings API: Query result count:",c.results?.length||0),console.log("\u{1F50D} Admin Listings API: Query success:",c.success),console.log("\u{1F50D} Admin Listings API: First result sample:",c.results?.[0]||"No results");let v="SELECT COUNT(*) AS total FROM listings l";e?v+=" WHERE l.id = ?":A&&(v+=" WHERE l.title LIKE ? OR l.description LIKE ?");let P=await a.prepare(v).bind(...N).all(),I=P.results?.[0]?.total||0;return console.log("\u{1F50D} Admin Listings API: Total listings in database:",I),u.xk.json({success:!0,listings:c.results??[],total:I,page:Math.floor(C/L)+1,limit:L})}catch(c){return console.error("\u{1F50D} Admin Listings API: Query execution failed:",c),console.error("\u{1F50D} Admin Listings API: Query error message:",c?.message),console.error("\u{1F50D} Admin Listings API: Query error stack:",c?.stack),u.xk.json({success:!1,error:"Database query failed"},{status:500})}}catch(m){return console.error("\u{1F50D} Admin Listings API: Top-level error occurred:",m),console.error("\u{1F50D} Admin Listings API: Error message:",m?.message),console.error("\u{1F50D} Admin Listings API: Error stack:",m?.stack),console.error("\u{1F50D} Admin Listings API: Error type:",m?.constructor?.name),u.xk.json({error:"Failed to load listings",details:m?.message||String(m)||"Unknown error",errorType:m?.constructor?.name||"Unknown"},{status:500})}}let E=new g.AppRouteRouteModule({definition:{kind:h.x.APP_ROUTE,page:"/api/admin/listings/list/route",pathname:"/api/admin/listings/list",filename:"route",bundlePath:"app/api/admin/listings/list/route"},resolvedPagePath:"/Users/georgedanayan/Bitboard/src/app/api/admin/listings/list/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:S,staticGenerationAsyncStorage:O,serverHooks:$}=E,K="/api/admin/listings/list/route";function w(){return(0,d.XH)({serverHooks:$,staticGenerationAsyncStorage:O})}let H=o,q=s.a.wrap(E)},3808:le,855:ue,3059:ce,5492:_e},D=>{var f=t=>D(D.s=t);D.O(0,[9531,2703],()=>f(6782));var r=D.O();(p._ENTRIES=typeof p._ENTRIES>"u"?{}:p._ENTRIES)["middleware_app/api/admin/listings/list/route"]=r}]),function(){let D={exports:{},loaded:!1};return function(r,t){var o=Object.create,s=Object.defineProperty,g=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,d=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,R=e=>s(e,"__esModule",{value:!0}),T=(e,_)=>{R(e);for(var a in _)s(e,a,{get:_[a],enumerable:!0})},E=(e,_,a)=>{if(_&&typeof _=="object"||typeof _=="function")for(let i of h(_))!u.call(e,i)&&i!=="default"&&s(e,i,{get:()=>_[i],enumerable:!(a=g(_,i))||a.enumerable});return e},S=e=>E(R(s(e!=null?o(d(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);T(t,{default:()=>C});var O=S((Y(),ae(j))),$="@next/request-context",K=Symbol.for($),w=Symbol.for("internal.storage");function H(){let e=p;if(!e[K]){let _=new O.AsyncLocalStorage,a={get:()=>_.getStore(),[w]:_};e[K]=a}return e[K]}var q=H();function B(e,_){return q[w].run(e,_)}function m(e){let _={};return e&&e.forEach((a,i)=>{_[i]=a,i.toLowerCase()==="set-cookie"&&(_[i]=L(a))}),_}function L(e){let _=[],a=0,i,N,k,c,v;function P(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}function I(){return N=e.charAt(a),N!=="="&&N!==";"&&N!==","}for(;a<e.length;){for(i=a,v=!1;P();)if(N=e.charAt(a),N===","){for(k=a,a+=1,P(),c=a;a<e.length&&I();)a+=1;a<e.length&&e.charAt(a)==="="?(v=!0,a=c,_.push(e.substring(i,k)),i=a):a=k+1}else a+=1;(!v||a>=e.length)&&_.push(e.substring(i,e.length))}return _}function C(e){let _=e.staticRoutes.map(i=>({regexp:new RegExp(i.namedRegex),page:i.page})),a=e.dynamicRoutes?.map(i=>({regexp:new RegExp(i.namedRegex),page:i.page}))||[];return async function(i,N){let k=new URL(i.url).pathname,c={};if(e.nextConfig?.basePath&&k.startsWith(e.nextConfig.basePath)&&(k=k.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let P of e.nextConfig.i18n.locales){let I=new RegExp(`^/${P}($|/)`,"i");if(k.match(I)){k=k.replace(I,"/")||"/";break}}for(let P of _)if(P.regexp.exec(k)){c.name=P.page;break}if(!c.name){let P=M(k);for(let I of a||[]){if(P&&!M(I.page))continue;let Q=I.regexp.exec(k);if(Q){c={name:I.page,params:Q.groups};break}}}let v=await B({waitUntil:N.waitUntil},()=>p._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:i.url,method:i.method,headers:m(i.headers),ip:b(i.headers,A.Ip),geo:{city:b(i.headers,A.City,!0),country:b(i.headers,A.Country,!0),latitude:b(i.headers,A.Latitude),longitude:b(i.headers,A.Longitude),region:b(i.headers,A.Region,!0)},nextConfig:e.nextConfig,page:c,body:i.body}}));return v.waitUntil&&N.waitUntil(v.waitUntil),v.response}}function b(e,_,a=!1){let i=e.get(_)||void 0;return a&&i?decodeURIComponent(i):i}function M(e){return e==="/api"||e.startsWith("/api/")}var A;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(A||(A={}))}(D,D.exports),D.exports}.call({}).default({name:"app/api/admin/listings/list/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/about",regex:"^/about(?:/)?$",routeKeys:{},namedRegex:"^/about(?:/)?$"},{page:"/admin",regex:"^/admin(?:/)?$",routeKeys:{},namedRegex:"^/admin(?:/)?$"},{page:"/admin/chats",regex:"^/admin/chats(?:/)?$",routeKeys:{},namedRegex:"^/admin/chats(?:/)?$"},{page:"/admin/listings",regex:"^/admin/listings(?:/)?$",routeKeys:{},namedRegex:"^/admin/listings(?:/)?$"},{page:"/admin/users",regex:"^/admin/users(?:/)?$",routeKeys:{},namedRegex:"^/admin/users(?:/)?$"},{page:"/auth-success",regex:"^/auth\\-success(?:/)?$",routeKeys:{},namedRegex:"^/auth\\-success(?:/)?$"},{page:"/careers",regex:"^/careers(?:/)?$",routeKeys:{},namedRegex:"^/careers(?:/)?$"},{page:"/contact",regex:"^/contact(?:/)?$",routeKeys:{},namedRegex:"^/contact(?:/)?$"},{page:"/escrow",regex:"^/escrow(?:/)?$",routeKeys:{},namedRegex:"^/escrow(?:/)?$"},{page:"/faq",regex:"^/faq(?:/)?$",routeKeys:{},namedRegex:"^/faq(?:/)?$"},{page:"/help",regex:"^/help(?:/)?$",routeKeys:{},namedRegex:"^/help(?:/)?$"},{page:"/icon.svg",regex:"^/icon\\.svg(?:/)?$",routeKeys:{},namedRegex:"^/icon\\.svg(?:/)?$"},{page:"/messages",regex:"^/messages(?:/)?$",routeKeys:{},namedRegex:"^/messages(?:/)?$"},{page:"/privacy",regex:"^/privacy(?:/)?$",routeKeys:{},namedRegex:"^/privacy(?:/)?$"},{page:"/safety",regex:"^/safety(?:/)?$",routeKeys:{},namedRegex:"^/safety(?:/)?$"},{page:"/search",regex:"^/search(?:/)?$",routeKeys:{},namedRegex:"^/search(?:/)?$"},{page:"/support",regex:"^/support(?:/)?$",routeKeys:{},namedRegex:"^/support(?:/)?$"},{page:"/terms",regex:"^/terms(?:/)?$",routeKeys:{},namedRegex:"^/terms(?:/)?$"},{page:"/test-settings",regex:"^/test\\-settings(?:/)?$",routeKeys:{},namedRegex:"^/test\\-settings(?:/)?$"}],dynamicRoutes:[{page:"/api/admin/chats/[chatId]/messages",regex:"^/api/admin/chats/([^/]+?)/messages(?:/)?$",routeKeys:{nxtPchatId:"nxtPchatId"},namedRegex:"^/api/admin/chats/(?<nxtPchatId>[^/]+?)/messages(?:/)?$"},{page:"/api/admin/listings/[listingId]/chats",regex:"^/api/admin/listings/([^/]+?)/chats(?:/)?$",routeKeys:{nxtPlistingId:"nxtPlistingId"},namedRegex:"^/api/admin/listings/(?<nxtPlistingId>[^/]+?)/chats(?:/)?$"},{page:"/api/admin/listings/[listingId]/images",regex:"^/api/admin/listings/([^/]+?)/images(?:/)?$",routeKeys:{nxtPlistingId:"nxtPlistingId"},namedRegex:"^/api/admin/listings/(?<nxtPlistingId>[^/]+?)/images(?:/)?$"},{page:"/api/admin/users/[userId]/chats",regex:"^/api/admin/users/([^/]+?)/chats(?:/)?$",routeKeys:{nxtPuserId:"nxtPuserId"},namedRegex:"^/api/admin/users/(?<nxtPuserId>[^/]+?)/chats(?:/)?$"},{page:"/api/admin/users/[userId]/listings",regex:"^/api/admin/users/([^/]+?)/listings(?:/)?$",routeKeys:{nxtPuserId:"nxtPuserId"},namedRegex:"^/api/admin/users/(?<nxtPuserId>[^/]+?)/listings(?:/)?$"},{page:"/api/chat/[chatId]",regex:"^/api/chat/([^/]+?)(?:/)?$",routeKeys:{nxtPchatId:"nxtPchatId"},namedRegex:"^/api/chat/(?<nxtPchatId>[^/]+?)(?:/)?$"},{page:"/api/listings/[id]",regex:"^/api/listings/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/listings/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/listings/[id]/view",regex:"^/api/listings/([^/]+?)/view(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/listings/(?<nxtPid>[^/]+?)/view(?:/)?$"},{page:"/api/users/[username]",regex:"^/api/users/([^/]+?)(?:/)?$",routeKeys:{nxtPusername:"nxtPusername"},namedRegex:"^/api/users/(?<nxtPusername>[^/]+?)(?:/)?$"},{page:"/api/users/[username]/listings",regex:"^/api/users/([^/]+?)/listings(?:/)?$",routeKeys:{nxtPusername:"nxtPusername"},namedRegex:"^/api/users/(?<nxtPusername>[^/]+?)/listings(?:/)?$"},{page:"/en/[username]",regex:"^/en/([^/]+?)(?:/)?$",routeKeys:{nxtPusername:"nxtPusername"},namedRegex:"^/en/(?<nxtPusername>[^/]+?)(?:/)?$"},{page:"/profile/[username]",regex:"^/profile/([^/]+?)(?:/)?$",routeKeys:{nxtPusername:"nxtPusername"},namedRegex:"^/profile/(?<nxtPusername>[^/]+?)(?:/)?$"}],nextConfig:{basePath:"",i18n:{locales:["en","fr","es","de"],defaultLocale:"en"}}})))(y,y,y);export{Pt as default};

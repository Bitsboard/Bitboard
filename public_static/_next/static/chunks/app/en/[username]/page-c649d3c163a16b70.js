(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[691],{1897:function(e,t,r){Promise.resolve().then(r.bind(r,7873))},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},7873:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u},runtime:function(){return c}});var a=r(7437),n=r(2265),s=r(6463),l=r(8070),i=r(6062),o=r(6248),d=r(9354);let c="edge";function u(){var e,t;let[r,c]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),[h,g]=(0,n.useState)(null),[x,f]=(0,n.useState)("newest"),{theme:v}=(0,l.Fg)(),b="dark"===v,p=(0,i.J)(),w=(0,s.useParams)().username;(0,n.useEffect)(()=>{let e=async()=>{try{var e,t,r,a,n,s;let l=await fetch("/api/users/".concat(w));if(!l.ok){if(404===l.status){m(null),c(!1);return}throw Error("Profile API error: ".concat(l.status))}let i=await l.json();if("no_db_binding"===i.error){let e={sso:"google",email:"".concat(w,"@example.com"),username:w,verified:w.includes("satoshi")||w.includes("luna")||w.includes("mika")||w.includes("nova")||w.includes("zen")||w.includes("noah"),registeredAt:Math.floor(Date.now()/1e3)-31536e3*Math.random(),profilePhoto:null,listings:Array.from({length:Math.floor(5*Math.random())+3},(e,t)=>({id:t+1,title:"Sample Listing ".concat(t+1," by ").concat(w),priceSat:Math.floor(1e6*Math.random())+1e5,createdAt:Math.floor(Date.now()/1e3)-2592e3*Math.random(),type:Math.random()>.5?"selling":"looking for"}))};m(e),c(!1);return}let o=await fetch("/api/users/".concat(w,"/listings"));if(!o.ok)throw Error("Listings API error: ".concat(o.status));let d=await o.json(),u={sso:(null===(e=i.user)||void 0===e?void 0:e.sso)||"google",email:(null===(t=i.user)||void 0===t?void 0:t.email)||"user@example.com",username:(null===(r=i.user)||void 0===r?void 0:r.username)||w,verified:(null===(a=i.user)||void 0===a?void 0:a.verified)||!1,registeredAt:(null===(n=i.user)||void 0===n?void 0:n.registeredAt)||Math.floor(Date.now()/1e3),profilePhoto:(null===(s=i.user)||void 0===s?void 0:s.profilePhoto)||null,listings:d.listings||[]};m(u)}catch(e){console.error("Failed to load profile data:",e),m(null)}finally{c(!1)}};(async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let t=await e.json();g((null==t?void 0:t.session)||null)}}catch(e){console.error("Failed to load current user session:",e)}})(),e()},[w]);let j=(null==h?void 0:null===(e=h.account)||void 0===e?void 0:e.username)===w;if(r)return(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-neutral-950 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-neutral-600 dark:text-neutral-400",children:"Loading profile..."})});if(!u)return(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-neutral-950 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-neutral-600 dark:text-neutral-400",children:"Profile not found"})});let k=(()=>{if(!(null==u?void 0:u.listings))return[];let e=[...u.listings];switch(x){case"alphabetical":return e.sort((e,t)=>e.title.localeCompare(t.title));case"newest":return e.sort((e,t)=>t.createdAt-e.createdAt);case"oldest":return e.sort((e,t)=>e.createdAt-t.createdAt);default:return e}})();return(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-neutral-950",children:(0,a.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-br from-orange-500 via-orange-600 to-orange-700 rounded-3xl p-8 mb-8 text-white shadow-2xl",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 via-transparent to-black/10"}),(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-white/5 to-transparent rounded-full -translate-y-16 translate-x-16"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-black/5 to-transparent rounded-full translate-y-12 -translate-x-12"}),j&&(0,a.jsx)("div",{className:"absolute top-6 right-6 z-20",children:(0,a.jsx)("form",{action:"/api/auth/logout",method:"post",children:(0,a.jsxs)("button",{type:"submit",className:"inline-flex items-center justify-center px-4 py-3 bg-white dark:bg-gradient-to-r dark:from-neutral-600 dark:to-neutral-700 text-neutral-900 dark:text-white font-medium rounded-lg hover:bg-neutral-50 dark:hover:from-neutral-700 dark:hover:to-neutral-800 transition-all duration-200 shadow-sm hover:shadow-md border border-neutral-300 dark:border-neutral-500/30 hover:border-neutral-400 dark:hover:border-neutral-400/50",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,o.t)("sign_out",p)]})})}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col lg:flex-row items-start lg:items-center gap-8",children:[(0,a.jsxs)("div",{className:"relative",children:[u.profilePhoto?(0,a.jsx)("img",{src:u.profilePhoto,alt:"Profile",className:(0,d.cn)("h-28 w-28 rounded-full border-4 shadow-2xl ring-4",b?"border-black ring-white/20":"border-white ring-white/20")}):(0,a.jsx)("div",{className:(0,d.cn)("h-28 w-28 rounded-full flex items-center justify-center shadow-2xl ring-4",b?"bg-gradient-to-br from-white/30 to-white/20 border-4 border-black ring-white/20":"bg-gradient-to-br from-neutral-100 to-neutral-200 border-4 border-white ring-white/20"),children:(0,a.jsx)("svg",{className:"h-14 w-14 text-neutral-600 dark:text-white/90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),u.verified&&(0,a.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-500 rounded-full p-2 shadow-lg ring-2 ring-white/50 bg-[length:200%_200%] animate-gradient-x",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-white to-orange-100 bg-clip-text text-transparent",children:u.username||"New User"}),u.verified&&(0,a.jsxs)("span",{className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-gradient-to-r from-cyan-400 to-blue-500 text-white border border-cyan-300/40 shadow-lg",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,o.t)("verified",p)]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400/30 to-orange-500/30 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-orange-200",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-orange-200/80 uppercase tracking-wide font-medium",children:(0,o.t)("reputation",p)}),(0,a.jsxs)("p",{className:"text-orange-100 font-semibold",children:["+",Math.floor(50*Math.random())+50]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400/30 to-orange-500/30 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-orange-200",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-orange-200/80 uppercase tracking-wide font-medium",children:(0,o.t)("member_since",p)}),(0,a.jsx)("p",{className:"text-orange-100 font-semibold",children:new Date(1e3*u.registeredAt).toLocaleDateString(void 0,{month:"long",year:"numeric"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400/30 to-orange-500/30 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-orange-200",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-orange-200/80 uppercase tracking-wide font-medium",children:(0,o.t)("active_listings",p)}),(0,a.jsx)("p",{className:"text-orange-100 font-semibold",children:(null===(t=u.listings)||void 0===t?void 0:t.length)||0})]})]})]})]})]})]}),j&&u.listings&&u.listings.length>0&&(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("button",{className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"+ Post New Listing"]})}),u.listings&&u.listings.length>0?(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:j?"Your Listings":"Listings"}),(0,a.jsxs)("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:[k.length," item",1!==k.length?"s":""]})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("select",{value:x,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"newest",children:"Newest First"}),(0,a.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,a.jsx)("option",{value:"alphabetical",children:"Alphabetical"})]})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(e=>(0,a.jsxs)("div",{className:"bg-neutral-50 dark:bg-neutral-800/50 rounded-xl border border-neutral-200 dark:border-neutral-700 p-4 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors duration-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("selling"===e.type?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300"),children:"selling"===e.type?"Selling":"Looking For"}),(0,a.jsx)("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:new Date(1e3*e.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]}),(0,a.jsx)("h3",{className:"font-medium text-neutral-900 dark:text-white mb-3 line-clamp-2",children:e.title}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400",children:[e.priceSat.toLocaleString()," sats"]}),(0,a.jsxs)("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["~$",(e.priceSat/1e8*45e3).toFixed(2)," CAD"]})]})]},e.id))})]}):(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-800 p-12 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-6",children:"✏️"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-white mb-2",children:(0,o.t)("no_listings_yet",p)}),(0,a.jsx)("p",{className:"text-neutral-600 dark:text-neutral-400 mb-6",children:j?(0,o.t)("no_listings_owner",p):(0,o.t)("no_listings_visitor",p)}),j&&(0,a.jsxs)("button",{className:"inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white font-medium rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,o.t)("create_listing",p)]})]})]})})}},6062:function(e,t,r){"use strict";r.d(t,{J:function(){return s}});var a=r(2265),n=r(6248);function s(){let[e,t]=(0,a.useState)(()=>(0,n.VQ)());return(0,a.useEffect)(()=>(0,n.Xi)(()=>t((0,n.VQ)())),[]),e}},8070:function(e,t,r){"use strict";r.d(t,{$Y:function(){return m},Fg:function(){return c},SettingsProvider:function(){return o},eY:function(){return u},rV:function(){return d}});var a=r(7437),n=r(2265);let s={theme:"dark",unit:"sats",layout:"grid"};function l(e,t){switch(t.type){case"SET_THEME":return{...e,theme:t.payload};case"SET_UNIT":return{...e,unit:t.payload};case"SET_LAYOUT":return{...e,layout:t.payload};case"INITIALIZE":return t.payload;default:return e}}let i=(0,n.createContext)(null);function o(e){let{children:t}=e,[r,o]=(0,n.useReducer)(l,s);return(0,n.useEffect)(()=>{try{let e=function(){try{let e=localStorage.getItem("theme"),t=localStorage.getItem("priceUnit"),r=localStorage.getItem("layoutPref");return{theme:"light"===e||"dark"===e?e:s.theme,unit:"sats"===t||"BTC"===t?t:s.unit,layout:"grid"===r||"list"===r?r:s.layout}}catch(e){return console.warn("Failed to read settings from localStorage:",e),s}}();o({type:"INITIALIZE",payload:e});{let t="dark"===e.theme;document&&document.documentElement&&document.documentElement.classList.toggle("dark",t)}}catch(e){console.warn("Settings initialization failed:",e)}},[]),(0,n.useEffect)(()=>{try{let e="dark"===r.theme;document&&document.documentElement&&(document.documentElement.classList.toggle("dark",e),window.dispatchEvent(new Event("resize")))}catch(e){console.warn("Theme application failed:",e)}},[r.theme]),(0,a.jsx)(i.Provider,{value:{state:r,dispatch:o},children:t})}function d(){let e=(0,n.useContext)(i);if(!e)throw Error("useSettings must be used within a SettingsProvider");let{state:t,dispatch:r}=e;return{...t,setTheme:e=>{r({type:"SET_THEME",payload:e});try{localStorage.setItem("theme",e),window.dispatchEvent(new CustomEvent("bb:theme",{detail:e}))}catch(e){}},setUnit:e=>{r({type:"SET_UNIT",payload:e});try{localStorage.setItem("priceUnit",e),window.dispatchEvent(new CustomEvent("bb:unit",{detail:e}))}catch(e){}},setLayout:e=>{r({type:"SET_LAYOUT",payload:e});try{localStorage.setItem("layoutPref",e),window.dispatchEvent(new CustomEvent("bb:layout",{detail:e}))}catch(e){}},toggleTheme:()=>{let e="dark"===t.theme?"light":"dark";r({type:"SET_THEME",payload:e});try{localStorage.setItem("theme",e),window.dispatchEvent(new CustomEvent("bb:theme",{detail:e}))}catch(e){}}}}let c=()=>{let{theme:e,setTheme:t,toggleTheme:r}=d();return{theme:e,setTheme:t,toggleTheme:r}},u=()=>{let{unit:e,setUnit:t}=d();return{unit:e,setUnit:t}},m=()=>{let{layout:e,setLayout:t}=d();return{layout:e,setLayout:t}}},9354:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(4839),n=r(6164);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}}},function(e){e.O(0,[868,248,971,526,744],function(){return e(e.s=1897)}),_N_E=e.O()}]);